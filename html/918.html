
<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="en-us" class="no-js">
<!--<![endif]-->

<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
    <meta charset="UTF-8">
    <title>#918 Script error - Issues - TellMeWhen - Addons - Projects - WoW CurseForge </title>
    <meta name="description" content="" />
    <meta name="theme-color" content="#121212" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Responsive Meta Tag -->
    <meta name="viewport" content="width=device-width, initial-scale = 1.0, maximum-scale=1.0, user-scalable=no" />

    
        <link rel="shortcut icon" href="https://media.forgecdn.net/avatars/97/676/636293438479169689.png" />
    

    <!-- Links -->
    
    

    <!-- Meta Properties -->
    
    

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/Content/2-0-6977-32150/Skins/Blocks/css/compiled.css"/>
<link rel="stylesheet" href="/Content/2-0-6977-32150/Skins/WoW/css/compiled.css"/>
<link rel="stylesheet" type="text/css" href="/api/custom-css" />
    

    <script type="text/javascript">
        var onloadCallback = function () {
            Cobalt.runOnHtmlInsert(Cobalt.Forms.handlegReCaptchaRender);
        };
    </script>

    <script src='https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit' async defer></script>
    <script src="https://apis.google.com/js/platform.js"></script>

    <!-- JavaScript -->
    <script src="/js/jquery?v=zhy3poSy6kGmZe4hNBKDvIn1MM84Smb43pQ4p677GA81"></script>

    <script src="/js/cobalt?v=jsX_SlJQMjvXXXx9yYwR0KxW4c7mDUf5qDn4cvZ6ods1"></script>

    <script src="/js/Elerium?v=eOmp0l7g2GpwxLMh2e-KG66v-DiizK4GjjgguEANGzQ1"></script>

    
    
    
    

    <script>
        Elerium.ProjectIssueDetails.projectSlug = "tellmewhen";
        Elerium.ProjectIssueDetails.projectIssueScopedID = 918;
        Elerium.ProjectIssueDetails.projectIssueActionModelID = 65410757;
        Elerium.ProjectIssueDetails.projectIssueModelID = 1943252551;
        Elerium.ProjectIssueDetails.projectIssueID = 5324;
    </script>   



 

</head>
<body class="site  site-curseforge site-wow body-project body-project-issuedetails disable-ads user-anonymous lang-en site-lang-en template-none skin-light-on-dark responsive-enabled" data-user-lang="1">

    
    <!-- No Script -->
    <noscript class="b-noscript">
        <p><i class="b-noscript-icon"></i> This site works best with JavaScript enabled. Please enable JavaScript to get the best experience from this site.</p>
    </noscript>
    <!-- Layout Start -->
    
    
    <div id="site" class="fixed single-column">
        <div id="site-main">
            <!-- Above Header, ex: Netbar -->
            
<div class="page-region">


<div class="netbar">
    <span class="netbar-logo netbar-left"><a href="/">CurseForge</a></span>
    
        <a href="/register?returnUrl=%2fprojects%2ftellmewhen%2fissues%2f918" id="register-link" class="netbar-signin netbar-right">Register</a>
        <a href="/login?returnUrl=%2fprojects%2ftellmewhen%2fissues%2f918" id="login-link" class="netbar-signin netbar-right">Sign In</a>
    
</div>

</div>

            <!-- Header, ex: Logo, search, etc. -->
            <header class="main" role="banner">
                

<div class="e-generic-header">
    <div class="logo-container">
        <a href="/">
            <h1>WoW CurseForge</h1>
        </a>
    </div>
</div>


<div class="primary-header-wrapper">
    <div class="page-region p-header p-header-a">

        <nav class="main p-nav p-nav-a" role="navigation">
            <ul class="b-list b-list-a b-list_float">

                
    <li id="nav-projects" class="  selected b-list-item p-nav-item">
        
            <a href="/projects"  class="">
                <span class="b-list-label">
                   Projects
    
                </span>
            </a>
        
    </li>

    <li id="nav-forums" class="  b-list-item p-nav-item">
        
            <a href="https://authors.curseforge.com/forums/world-of-warcraft"  class="">
                <span class="b-list-label">
                   Forums
    
                </span>
            </a>
        
    </li>

    <li id="nav-twitter" class="  b-list-item p-nav-item">
        
            <a href="http://bit.ly/2UM9XD0"  class="">
                <span class="b-list-label">
                   Twitter
    
                </span>
            </a>
        
    </li>

    <li id="nav-discord" class="  b-list-item p-nav-item">
        
            <a href="http://bit.ly/CFDiscord"  class="">
                <span class="b-list-label">
                   Discord
    
                </span>
            </a>
        
    </li>

    <li id="nav-dashboard" class=" section b-list-item p-nav-item">
        
            <a href="/dashboard"  class="">
                <span class="b-list-label">
                   Dashboard
    
                </span>
            </a>
        
            <ul class="">
                
    <li id="nav-paste" class="  b-list-item p-nav-item">
        
            <a href="/paste"  class="">
                <span class="b-list-label">
                   Paste
    
                </span>
            </a>
        
    </li>

    <li id="nav-reward-store" class="  b-list-item p-nav-item">
        
            <a href="https://authors.curseforge.com/store"  class="">
                <span class="b-list-label">
                   Reward Store
    
                </span>
            </a>
        
    </li>

            </ul>
        
    </li>

    <li id="nav-knowledge-base" class="  b-list-item p-nav-item">
        
            <a href="https://authors.curseforge.com/knowledge-base"  class="">
                <span class="b-list-label">
                   Knowledge Base
    
                </span>
            </a>
        
    </li>

    <li id="nav-feedback" class="  b-list-item p-nav-item">
        
            <a href="https://bit.ly/CurseForgeFeedback" target='_blank' rel='noopener' class="">
                <span class="b-list-label">
                   Feedback
    
                </span>
            </a>
        
    </li>


            </ul>
            <a data-ga-click-event-tracking-category="Desktop View" id="responsive-topnav-button" class="rs-link rs-link-to-desktop">Desktop View</a>
            
        </nav>

        <div class="searchform">
            <form class="primary-search b-search b-search-a" action="/search" method="get" novalidate="novalidate">
                <label for="search" class="icon-search"></label>
                <input class="b-search-input" type="search"  placeholder="Search..." name="search" />
            </form>
        </div>

    </div>
</div>

            </header>
            <!-- Below Header (Ad container), ex: Leaderboard and Badge unit -->
            <section class="ad-container">
                <div class="ad-bin">
                    
                </div>
            </section>
            <!-- Above Content, Ex: Breadcrumbs -->
            <section class="atf" role="complementary">
    <div class="p-header-b">
        <div class="container">
            
            <div class="project-details-container">
                <div class="project-user">
                    <div class="avatar-wrapper">
                        
                            <a class="e-avatar64 lightbox" href="https://media.forgecdn.net/avatars/54/532/636135407001880375.jpg">
                                <img src="https://media.forgecdn.net/avatars/thumbnails/54/532/62/62/636135407001880375.jpg"/>
                            </a>
                        
                    </div>
                    <h1 class="project-title  ">
                        <a href="/projects/tellmewhen">
                            <span class="overflow-tip">TellMeWhen</span></a>
                    </h1>
                    
                        <h2 class="RootGameCategory">
                            <a href="/addons">Addons</a>
                        </h2>
                    
                </div>
            </div>

            <div class="project-controls-container">
                <div class="categories-container">
                    <nav class="el-projectdetails-buttonwrapper">
                        <ul class="el-btn-group">
                            
                                        <li>
                                            <a class="button alt fa-icon-download" href="/projects/tellmewhen/files/latest">
                                                <span class="download-project">
                                                    Download Latest File
                                                </span>
                                            </a>
                                        </li>
                                    
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    

    <nav class="e-header-nav" data-target="e-header-nav">
        <div class="e-wrapper">
            <h3 class="e-mobile-heading" data-action="toggle-header-nav"></h3>
            <ul class="e-menu">

                
                    <li class="">
                        <a href="/projects/tellmewhen" >
                            Overview
                        </a>
                        
                    </li>
                    
                    <li class="">
                        <a href="/projects/tellmewhen/files" >
                            File
                        </a>
                        
                    </li>
                    
                    <li class="">
                        <a href="/projects/tellmewhen/images" >
                            Image
                        </a>
                        
                    </li>
                    
                    <li class=" e-selected ">
                        <a href="/projects/tellmewhen/issues" >
                            Issues
                        </a>
                        
                    </li>
                    
                    <li class="">
                        <a href="/projects/tellmewhen/source" >
                            Source
                        </a>
                        
                    </li>
                    
                    <li class="">
                        <a href="/projects/tellmewhen/pages" >
                            Pages
                        </a>
                        
                    </li>
                    
                    <li class=" e-hasSubmenu ">
                        <a href="/projects/tellmewhen/localization" >
                            Localization
                        </a>
                        
                           <ul class="e-drop-menu">
                            
                                <li class="">
                                   <a href="/projects/tellmewhen/localization">
                                       Overview
                                   </a>
                                </li>
                            
                                <li class="">
                                   <a href="/projects/tellmewhen/localization/export-lua">
                                       Export
                                   </a>
                                </li>
                            
                                <li class="">
                                   <a href="/projects/tellmewhen/localization/translators">
                                       Translators
                                   </a>
                                </li>
                            
                           </ul>
                        
                    </li>
                    
                    <li class=" e-hasSubmenu ">
                        <a href="/projects/tellmewhen/relations/dependencies" >
                            Relations
                        </a>
                        
                           <ul class="e-drop-menu">
                            
                                <li class="">
                                   <a href="/projects/tellmewhen/relations/dependencies">
                                       Dependencies
                                   </a>
                                </li>
                            
                                <li class="">
                                   <a href="/projects/tellmewhen/relations/dependents">
                                       Dependents
                                   </a>
                                </li>
                            
                           </ul>
                        
                    </li>
                    
            </ul>

            <div class="e-actions btn-group">
                
                        <a class="button icon-follow unfollow j-tooltip" href="/login?returnUrl=%252fprojects%252ftellmewhen%252fissues%252f918" title="You must log in to follow a project.">
                            <span>Follow</span>
                        </a>
                    
                    <a class="button tip icon-donate icon-paypal" href="https://www.paypal.com/cgi-bin/webscr?return=https://wow.curseforge.com/projects/tellmewhen?gameCategorySlug=addons&amp;projectID=8025&amp;cn=Add+special+instructions+to+the+addon+author()&amp;business=ascott18%40msn.com&amp;bn=PP-DonationsBF:btn_donateCC_LG.gif:NonHosted&amp;cancel_return=https://wow.curseforge.com/projects/tellmewhen?gameCategorySlug=addons&amp;projectID=8025&amp;lc=US&amp;item_name=TellMeWhen+(from+curseforge.com)&amp;cmd=_donations&amp;rm=1&amp;no_shipping=1&amp;currency_code=USD" rel="nofollow" title="Donate to this Project" data-action="donate" data-id="8025" data-name="TellMeWhen">
                        <span>Donate</span>
                    </a>
                
            </div>
        </div>
    </nav>
</section>
            <div class="container">
                <div id="content" class="main content-container">
                    <section class="primary-content" role="main">
                        

        <form data-project-issue-form action="/projects/tellmewhen/issues/918" method="post" class="project-issue-details closed" enctype="multipart/form-data">
            <input id="field-security-token" name="security-token" type="hidden" value="6089e2fcf0093e5e367918dd948a1d16" /><input id="field-authenticity-token" name="f8544a6e28605f57669d1581908ec4b5f" type="hidden" value="" />
            <div class="project-issue-header">
                

                <h2>Script error <span>#918</span></h2>
                <hr>
                <div class="project-issue-tagblock">
                    
                        <ul class="project-issue-tags">
                            
                                <li class="tag-tag">Defect</li>
                            
                                <li class="tag-tag">Invalid</li>
                            
                        </ul>
                                        
                </div>

                <div class="project-issue-status status-closed">
                    <span>Closed</span>
                </div>

                
                    <div class="project-issue-assigned-member">
                        <span class="e-infoLabel">Assigned to</span>
                        <span class="user-tag">
                            
<div class="avatar avatar-16 user user-role-registered-user">
        <a href="/members/Cybeloras">
            <img style="max-width: 16px" src="https://media.forgecdn.net/avatars/thumbnails/64/275/16/16/636151561221451261.jpeg"  alt="Cybeloras&#x27;s avatar"
                onerror="if (this.src != 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y') this.src = 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y';" />
        </a>
    
</div>

                            <a href="/members/Cybeloras">Cybeloras</a>
                        </span>
                    </div>
                
            </div>

            <div data-project-issue-edit-container></div>
            <ul class="project-issue-timeline">
                

                <li class="project-issue-comment-container" data-target="project-issue-description">
                    
<div class="avatar avatar-48 user user-role-registered-user">
        <a href="/members/pankL">
            <img style="max-width: 48px" src="https://secure.gravatar.com/avatar/7cc3f2b225485dbadd611a9a99762b09?d=retro&amp;s=48"  alt="pankL&#x27;s avatar"
                onerror="if (this.src != 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y') this.src = 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y';" />
        </a>
    
</div>

                    <div class="project-issue-comment">
                        <header class="project-issue-comment-header">
                            <a href="/members/pankL">pankL</a>
                            <span class="e-infoLabel">created this issue </span><span><abbr class="tip standard-date standard-datetime" title="01 20 2014 00:40:01 (CST) (UTC-6:00)" data-epoch="1390200001">Jan 20, 2014</abbr></span>
                            
                        </header>
                        <div class="project-issue-comment-body">
                            <p>-- --------------------<br>-- TellMeWhen<br>-- Originally by Nephthys of Hyjal &lt;lieandswell@yahoo.com&gt;</p><p>-- Other contributions by:<br>--&nbsp; &nbsp; &nbsp; &nbsp; Sweetmms of Blackrock, Oozebull of Twisting Nether, Oodyboo of Mug&#x27;thol,<br>--&nbsp; &nbsp; &nbsp; &nbsp; Banjankri of Blackrock, Predeter of Proudmoore, Xenyr of Aszune</p><p>-- Currently maintained by<br>-- Cybeloras of Aerie Peak/Detheroc/Mal&#x27;Ganis<br>-- --------------------</p><p>if not TMW then return end</p><p>local TMW = TMW<br>local L = TMW.L<br>local print = TMW.print</p><p>local type, pairs, assert, rawget, wipe =<br>&nbsp; &nbsp; &nbsp; type, pairs, assert, rawget, wipe</p><p>local DogTag = LibStub(&quot;LibDogTag-3.0&quot;)<br>local LMB = LibStub(&quot;Masque&quot;, true) or (LibMasque and LibMasque(&quot;Button&quot;))<br>local LSM = LibStub(&quot;LibSharedMedia-3.0&quot;)</p><p>local TEXT = TMW:NewModule(&quot;TextDisplay&quot;)<br>TMW.TEXT = TEXT</p><p>TEXT.MasqueSkinnableTexts = {<br>&nbsp; &nbsp; -- A list of available SkinAs settings,<br>&nbsp; &nbsp; -- paired with their localized name (for easy use in Ace3ConfigDialog dropdown)<br><br>&nbsp; &nbsp; [&quot;&quot;] = L[&quot;TEXTLAYOUTS_SKINAS_NONE&quot;],<br><br>&nbsp; &nbsp; Count = L[&quot;TEXTLAYOUTS_SKINAS_COUNT&quot;],<br>&nbsp; &nbsp; HotKey = L[&quot;TEXTLAYOUTS_SKINAS_HOTKEY&quot;],<br>}</p><p>TMW:RegisterDatabaseDefaults{<br>&nbsp; &nbsp; global = {<br>&nbsp; &nbsp; &nbsp; &nbsp; TextLayouts = {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Layout defaults<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [&quot;**&quot;] = {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 1,&nbsp; &nbsp; &nbsp; &nbsp; -- The number of text displays that this layout handles.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &quot;&quot;,&nbsp; &nbsp; &nbsp; &nbsp; -- The name of this layout. Aesthetic only, doesn&#x27;t need to be unique.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GUID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &quot;&quot;,&nbsp; &nbsp; &nbsp; &nbsp; -- The GUID of this layout. Must be unique for all layouts. This is what the layout is keyed as in its parent table, and is how layouts are identified everywhere.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NoEdit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = false,&nbsp; &nbsp; -- True if the layout is a default layout and should not be modified.<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Display defaults<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [&quot;**&quot;] = {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StringName&nbsp; &nbsp; &nbsp; &nbsp; = &quot;&quot;,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Name of the string (user-readable)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Name&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &quot;Arial Narrow&quot;,&nbsp; &nbsp; -- Name of the Font (Stupid key for this setting, but it dates back to antiquity)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 12,&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Font size<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Justify&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &quot;CENTER&quot;,&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; --<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Outline&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &quot;THICKOUTLINE&quot;,&nbsp;&nbsp; -- Font outline<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Shadow&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0,<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Anchors = {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n = 1,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [&quot;**&quot;] = {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Anchor setting<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Anchor setting<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; point&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &quot;CENTER&quot;,&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; -- Anchor setting<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; relativeTo&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; = &quot;&quot;,&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Anchor setting<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; relativePoint&nbsp;&nbsp; &nbsp; = &quot;CENTER&quot;,&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; -- Anchor setting<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DefaultText&nbsp; &nbsp; &nbsp; &nbsp; = &quot;&quot;,&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SkinAs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &quot;&quot;,&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- The only time this layout should ever get used is if a view doesn&#x27;t declare any default layout for itself.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- It has no displays and cannot be edited. It should also be hidden from the text layout configuration in TMW&#x27;s main options.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [&quot;&quot;] = {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Name = L[&quot;TEXTLAYOUTS_DEFAULTS_NOLAYOUT&quot;],<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GUID = &quot;&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NoEdit = true,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n = 0,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp; &nbsp; },<br>}</p><p>TMW:MergeDefaultsTables({<br>&nbsp; &nbsp; SettingsPerView = {<br>&nbsp; &nbsp; &nbsp; &nbsp; [&quot;**&quot;] = {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Fall back on the blank layout if an IconView does not explicitly define a layout.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TextLayout = &quot;&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp; &nbsp; },<br>}, TMW.Group_Defaults)</p><p>TMW:MergeDefaultsTables({<br>&nbsp; &nbsp; SettingsPerView = {<br>&nbsp; &nbsp; &nbsp; &nbsp; [&quot;**&quot;] = {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- The table of texts that correspond to the displays defined by the text layout.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Texts = {},<br>&nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp; &nbsp; },<br>}, TMW.Icon_Defaults)</p><p>-- -------------------<br>-- SETTINGS UPGRADES<br>-- -------------------</p><p>TMW:RegisterUpgrade(70010, {<br>&nbsp; &nbsp; recursiveReplaceLayoutGUIDs = function(self, table, GUIDmap)<br>&nbsp; &nbsp; &nbsp; &nbsp; for k, v in pairs(table) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if type(v) == &quot;table&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self:recursiveReplaceLayoutGUIDs(v, GUIDmap)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; elseif k == &quot;TextLayout&quot; and GUIDmap[v] then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; table[k] = GUIDmap[v]<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end,</p><p>&nbsp; &nbsp; profile = function(self, profile, profileName)<br>&nbsp; &nbsp; &nbsp; &nbsp; local GUIDmap = {}</p><p>&nbsp; &nbsp; &nbsp; &nbsp; for GUID, layout in pairs(profile.TextLayouts) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if type(layout) == &quot;table&quot; and not layout.NoEdit and type(layout.GUID) == &quot;string&quot; then</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if not layout.GUID:match(&quot;^TMW:textlayout&quot;) then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Change the GUID into the new GUID syntax.</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local newGUID = &quot;TMW:textlayout:&quot; .. layout.GUID</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GUIDmap[GUID] = newGUID<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; layout.GUID = newGUID<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if not rawget(TMW.db.global.TextLayouts, layout.GUID) then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- The layout doesn&#x27;t already exist, so just put it straight in.</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; layout.Name = layout.Name .. &quot; (&quot; .. FROM .. &quot; &quot; .. profileName .. &quot;)&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TMW:CopyTableInPlaceWithMeta(layout, TMW.db.global.TextLayouts[layout.GUID])</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Upgrade the new layout manually. This is required because this possibly un-upgraded<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- layout will be getting mixed into layouts whose version is tracked by the global<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- version number. When we are upgrading a profile, global upgrades have already<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- happened, so the layout we are sticking into global.TextLayouts will never get<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- old upgrades.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TMW:DoUpgrade(&quot;textlayout&quot;, profile.Version, layout, layout.GUID)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- The layout does already exist.</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local existingName = TMW.db.global.TextLayouts[layout.GUID].Name<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TMW.db.global.TextLayouts[layout.GUID].Name = &quot;&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local layoutName = layout.Name<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; layout.Name = &quot;&quot;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Check to see if it is exactly the same as the existing layout.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- In order to properly compare, we have to copy the old layout<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- into a new table so that all the database metatables will be in place.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local layoutWithMetatables = TMW:CopyTableInPlaceWithMeta(layout, TMW.db.global.TextLayouts[&quot;\000&quot;])<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TMW.db.global.TextLayouts[&quot;\000&quot;] = nil</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local comparison = TMW:DeepCompare(TMW.db.global.TextLayouts[layout.GUID], layoutWithMetatables)</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TMW.db.global.TextLayouts[layout.GUID].Name = existingName<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; layout.Name = layoutName</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if comparison then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- The existing layout is the same. Do nothing.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- The existing layout is different. Give it a new GUID and then stick it in.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local newGUID = TMW:GenerateGUID(&quot;textlayout&quot;, TMW.CONST.GUID_SIZE)</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GUIDmap[GUID] = newGUID<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; layout.GUID = newGUID<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; layout.Name = layout.Name .. &quot; (&quot; .. FROM .. &quot; &quot; .. profileName .. &quot;)&quot;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TMW:CopyTableInPlaceWithMeta(layout, TMW.db.global.TextLayouts[layout.GUID])</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- See above for an explanation of this upgrade.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TMW:DoUpgrade(&quot;textlayout&quot;, profile.Version, layout, layout.GUID)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; end</p><p>&nbsp; &nbsp; &nbsp; &nbsp; profile.TextLayouts = nil</p><p>&nbsp; &nbsp; &nbsp; &nbsp; self:recursiveReplaceLayoutGUIDs(profile, GUIDmap)<br>&nbsp; &nbsp; end<br>})</p><p>TMW:RegisterUpgrade(60448, {<br>&nbsp; &nbsp; textlayout = function(self, settings, GUID)<br>&nbsp; &nbsp; &nbsp; &nbsp; if not settings.NoEdit then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for i, displaySettings in ipairs(settings) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.Anchors.n = 1<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local point = displaySettings.point or &quot;CENTER&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.Justify = point:match(&quot;LEFT&quot;) or point:match(&quot;RIGHT&quot;) or &quot;CENTER&quot;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.Anchors[1].x&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = displaySettings.x or 0<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.Anchors[1].y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = displaySettings.y or 0<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.Anchors[1].point&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = displaySettings.point or &quot;CENTER&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.Anchors[1].relativePoint&nbsp;&nbsp; &nbsp; = displaySettings.relativePoint or &quot;CENTER&quot;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.x&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = nil<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = nil<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.point&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = nil<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.relativePoint&nbsp;&nbsp; &nbsp; = nil<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end,<br>})</p><p>TMW:RegisterUpgrade(60338, {<br>&nbsp; &nbsp; -- I decided to change [Stacks] to return numbers instead of strings<br>&nbsp; &nbsp; icon = function(self, ics)<br>&nbsp; &nbsp; &nbsp; &nbsp; for viewName, settingsPerView in pairs(ics.SettingsPerView) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for displayID, text in pairs(settingsPerView.Texts) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; settingsPerView.Texts[displayID] = text<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :gsub(&quot;(Stacks[^:]-:Hide)%(&#x27;0&#x27;%)&quot;, &quot;%1(0)&quot;)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :gsub(&quot;(Stacks[^:]-:Hide)%(&#x27;0&#x27;, &#x27;1&#x27;%)&quot;, &quot;%1(0, 1)&quot;)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end,<br>&nbsp; &nbsp; textlayout = function(self, settings, GUID)<br>&nbsp; &nbsp; &nbsp; &nbsp; -- I decided to change [Stacks] to return numbers instead of strings<br>&nbsp; &nbsp; &nbsp; &nbsp; for i, displaySettings in ipairs(settings) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.DefaultText = displaySettings.DefaultText<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :gsub(&quot;(Stacks[^:]-:Hide)%(&#x27;0&#x27;%)&quot;, &quot;%1(0)&quot;)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :gsub(&quot;(Stacks[^:]-:Hide)%(&#x27;0&#x27;, &#x27;1&#x27;%)&quot;, &quot;%1(0, 1)&quot;)<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end,<br>})</p><p>TMW:RegisterUpgrade(60317, {<br>&nbsp; &nbsp; textlayout = function(self, settings, GUID)<br>&nbsp; &nbsp; &nbsp; &nbsp; -- A bug with importing text layouts led them to have their Name attribute set as a table<br>&nbsp; &nbsp; &nbsp; &nbsp; -- (Happened because Name was getting set to nil, and was getting recreated as a table through metamethods)<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if type(settings.Name) == &quot;table&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; settings.Name = &quot;Sorry, the name of this layout was lost.&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end<br>})</p><p>TMW:RegisterUpgrade(60303, {<br>&nbsp; &nbsp; icon = function(self, ics)<br>&nbsp; &nbsp; &nbsp; &nbsp; -- The setting to trigger fallback on groups is nil now, not &quot;&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; -- (icon settings per view don&#x27;t define a default TextLayout,<br>&nbsp; &nbsp; &nbsp; &nbsp; -- only groups do, so this will actually work and won&#x27;t cause fallback<br>&nbsp; &nbsp; &nbsp; &nbsp; -- on defaults by setting it nil because the default is also nil)<br><br>&nbsp; &nbsp; &nbsp; &nbsp; for viewName, settingsPerView in pairs(ics.SettingsPerView) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if settingsPerView.TextLayout == &quot;&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; settingsPerView.TextLayout = nil<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end<br>})</p><p>TMW:RegisterUpgrade(60038, {<br>&nbsp; &nbsp; group = function(self, gs)<br>&nbsp; &nbsp; &nbsp; &nbsp; gs.Fonts = nil<br>&nbsp; &nbsp; end<br>})</p><p>TMW:RegisterUpgrade(60029, {<br>&nbsp; &nbsp; textlayout = function(self, settings, GUID)<br>&nbsp; &nbsp; &nbsp; &nbsp; -- For some reason a lot of text layouts are missing quotes.<br>&nbsp; &nbsp; &nbsp; &nbsp; -- (This may just be in my own settings as an artifact of early testing; but could also be in other people who alpha tested)<br>&nbsp; &nbsp; &nbsp; &nbsp; -- It also changed to not hide a stack of &#x27;1&#x27;.<br>&nbsp; &nbsp; &nbsp; &nbsp; for i, displaySettings in ipairs(settings) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if displaySettings.DefaultText == &quot;[Stacks:Hide(0, 1)]&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; or displaySettings.DefaultText == &quot;[Stacks:Hide(&#x27;0&#x27;, &#x27;1&#x27;)]&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; or displaySettings.DefaultText == &quot;[Stacks:Hide(&#x27;0&#x27;)]&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.DefaultText = &quot;[Stacks:Hide(0)]&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end,<br>})</p><p>TMW:RegisterUpgrade(51019, {<br>&nbsp; &nbsp; textlayout = function(self, settings, GUID)<br>&nbsp; &nbsp; &nbsp; &nbsp; -- I don&#x27;t know why this layout exists, but I know it was my fault, so I am going to delete it.<br>&nbsp; &nbsp; &nbsp; &nbsp; if GUID == &quot;icon&quot; and settings.GUID == &quot;&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TMW.db.global.TextLayouts[GUID] = nil<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TMW.Warn(&quot;TMW has deleted the invalid text layout keyed as &#x27;icon&#x27; that was probably causing errors for you. If you were using it on any of your icons, then I apologize, but you probably weren&#x27;t because it probably wasn&#x27;t even named&quot;)<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end,<br>})</p><p>TMW:RegisterUpgrade(51003, {<br>&nbsp; &nbsp; ---------- Helper methods and data ----------<br>&nbsp; &nbsp; pairs = {<br>&nbsp; &nbsp; &nbsp; &nbsp; -- Matches [displayID] = oldGroupTextSettingsKey<br>&nbsp; &nbsp; &nbsp; &nbsp; [1] = &quot;Bind&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; [2] = &quot;Count&quot;,<br>&nbsp; &nbsp; },<br><br>&nbsp; &nbsp; -- The old defaults for the Count text (stacks) from the old text system.<br>&nbsp; &nbsp; Count = {<br>&nbsp; &nbsp; &nbsp; &nbsp; ConstrainWidth&nbsp; = false,<br>&nbsp; &nbsp; &nbsp; &nbsp; point&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &quot;BOTTOMRIGHT&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; relativePoint&nbsp;&nbsp; = &quot;BOTTOMRIGHT&quot;,<br><br>&nbsp; &nbsp; &nbsp; &nbsp; Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &quot;Arial Narrow&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 12,<br>&nbsp; &nbsp; &nbsp; &nbsp; x&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = -2,<br>&nbsp; &nbsp; &nbsp; &nbsp; y&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 2,<br>&nbsp; &nbsp; &nbsp; &nbsp; Outline&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; = &quot;THICKOUTLINE&quot;,<br>&nbsp; &nbsp; },<br><br>&nbsp; &nbsp; -- The old defaults for the Bind text from the old text system.<br>&nbsp; &nbsp; Bind = {<br>&nbsp; &nbsp; &nbsp; &nbsp; y&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = -2,<br>&nbsp; &nbsp; &nbsp; &nbsp; point&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &quot;TOPLEFT&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; relativePoint&nbsp;&nbsp; = &quot;TOPLEFT&quot;,<br><br>&nbsp; &nbsp; &nbsp; &nbsp; Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &quot;Arial Narrow&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 12,<br>&nbsp; &nbsp; &nbsp; &nbsp; x&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = -2,<br>&nbsp; &nbsp; &nbsp; &nbsp; Outline&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; = &quot;THICKOUTLINE&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; ConstrainWidth&nbsp; = true,<br>&nbsp; &nbsp; },<br><br>&nbsp; &nbsp; -- <a href="/linkout?remoteUrl=http%253a%252f%252fsnippets.luacode.org%252fsnippets%252fDeep_Comparison_of_Two_Values_3" rel="nofollow">http://snippets.luacode.org/snippets/Deep_Comparison_of_Two_Values_3</a><br>&nbsp; &nbsp; deepcompare = function(self,t1,t2)<br>&nbsp; &nbsp; &nbsp; &nbsp; local ty1 = type(t1)<br>&nbsp; &nbsp; &nbsp; &nbsp; local ty2 = type(t2)<br>&nbsp; &nbsp; &nbsp; &nbsp; if ty1 ~= ty2 then return false end<br>&nbsp; &nbsp; &nbsp; &nbsp; -- non-table types can be directly compared<br>&nbsp; &nbsp; &nbsp; &nbsp; if ty1 ~= &#x27;table&#x27; and ty2 ~= &#x27;table&#x27; then return t1 == t2 end<br>&nbsp; &nbsp; &nbsp; &nbsp; for k1,v1 in pairs(t1) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local v2 = t2[k1]<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if v2 == nil or not self:deepcompare(v1,v2) then return false end<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; for k2,v2 in pairs(t2) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local v1 = t1[k2]<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if v1 == nil or not self:deepcompare(v1,v2) then return false end<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; return true<br>&nbsp; &nbsp; end,<br><br>&nbsp; &nbsp; -- Sets a group to use the specified text layout<br>&nbsp; &nbsp; SetLayoutToGroup = function(self, gs, GUID)<br>&nbsp; &nbsp; &nbsp; &nbsp; gs.SettingsPerView.icon.TextLayout = GUID<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- the group setting is a fallback for icons, so there is no reason to set the layout for individual icons<br>&nbsp; &nbsp; &nbsp; &nbsp; for iconID, ics in pairs(gs.Icons) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ics.SettingsPerView.icon.TextLayout = nil<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end,<br><br><br>&nbsp; &nbsp; ---------- Upgrade method ----------<br>&nbsp; &nbsp; group = function(self, gs)<br>&nbsp; &nbsp; &nbsp; &nbsp; -- Create a layout table to start storing text layout data for this group in.<br>&nbsp; &nbsp; &nbsp; &nbsp; local layout = TMW.db.global.TextLayouts[0]<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- We don&#x27;t actually want to define this as a real text layout yet, so take it out of TextLayouts.<br>&nbsp; &nbsp; &nbsp; &nbsp; TMW.db.global.TextLayouts[0] = nil<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- The old text system had two displays<br>&nbsp; &nbsp; &nbsp; &nbsp; layout.n = 2<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- These are constants for each text display:<br>&nbsp; &nbsp; &nbsp; &nbsp; -- Display 1 is the binding/label text<br>&nbsp; &nbsp; &nbsp; &nbsp; layout[1].StringName = L[&quot;TEXTLAYOUTS_DEFAULTS_BINDINGLABEL&quot;]<br>&nbsp; &nbsp; &nbsp; &nbsp; layout[1].SkinAs = &quot;HotKey&quot;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- Display 2 is the stack text<br>&nbsp; &nbsp; &nbsp; &nbsp; layout[2].StringName = L[&quot;TEXTLAYOUTS_DEFAULTS_STACKS&quot;]<br>&nbsp; &nbsp; &nbsp; &nbsp; layout[2].DefaultText = &quot;[Stacks:Hide(0)]&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; layout[2].SkinAs = &quot;Count&quot;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; for i = 1, layout.n do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- displaySettings holds the settings for the text layout being created<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local displaySettings = layout[i]<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- settingsKey is the key that corresponds to the old text settings<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local settingsKey = self.pairs[i]<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- source holds the old text settings<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local source = gs.Fonts and gs.Fonts[settingsKey]<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Iterate over all of the old text settings.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for _, setting in TMW:Vararg(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Name&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Size&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;x&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;y&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;point&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;relativePoint&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Outline&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;OverrideLBFPos&quot;,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ConstrainWidth&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- (not source) :: If the old text settings are nil, then the entire display used all default settings, so inherit from defaults.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- (So Ace3DB purged it completely because it wasn&#x27;t needed)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- (source[setting] == nil) :: If this specific setting is nil, then it was default, so inherit from defaults.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if not source or source[setting] == nil then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- self[settingsKey][setting] holds the old defaults for the text display we are creating a layout for.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings[setting] = self[settingsKey][setting]<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- This setting was defined, so use the setting that was defined for it.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings[setting] = source[setting]<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- OverrideLBFPos isn&#x27;t used anymore, instead SkinAs is set to &quot;&quot; (signifying don&#x27;t skin this display)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if displaySettings.OverrideLBFPos then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.SkinAs = &quot;&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.OverrideLBFPos = nil<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Fix this typo (MONOCHORME) which has probably been here at least a year without being noticed... until now<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if displaySettings.Outline == &quot;MONOCHORME&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; displaySettings.Outline = &quot;MONOCHROME&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- We are done constructing a text layout out of this group&#x27;s old text settings.<br>&nbsp; &nbsp; &nbsp; &nbsp; -- Now, check and see if there alredy exists a layout with the exact same settings from a previous group&#x27;s upgrade.<br>&nbsp; &nbsp; &nbsp; &nbsp; for GUID, layoutSettings in pairs(TMW.db.global.TextLayouts) do<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if layoutSettings ~= layout then -- I don&#x27;t know why this check was written, but leave it in.<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- These three settings don&#x27;t actually impact the group, so ignore them in the comparison.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Save them into variables, and then set them to their defaults.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local name, GUID, noedit = layoutSettings.Name, layoutSettings.GUID, layoutSettings.NoEdit<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; layoutSettings.Name, layoutSettings.GUID, layoutSettings.NoEdit = &quot;&quot;, &quot;&quot;, false<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Do the actual comparison to check if the layout we just created is a duplicate of one that already exists.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local isDuplicate = self:deepcompare(layoutSettings, layout)<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Restore the settings that we just set to defaults.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; layoutSettings.Name, layoutSettings.GUID, layoutSettings.NoEdit = name, GUID, noedit<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if isDuplicate then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- If the layout we just created is a duplicate of another, then set the pre-existing layout to the group.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- The layout we just created just becomes garbage and will get picked up by the gc eventually.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self:SetLayoutToGroup(gs, GUID)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- If we&#x27;ve made it to this point, then the layout we just created wasn&#x27;t a duplicate.<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- Create a GUID for the new layout and set it.<br>&nbsp; &nbsp; &nbsp; &nbsp; local GUID = TMW:GenerateGUID(&quot;textlayout&quot;, TMW.CONST.GUID_SIZE)<br>&nbsp; &nbsp; &nbsp; &nbsp; layout.GUID = GUID<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- Determine a name for the new layout:<br>&nbsp; &nbsp; &nbsp; &nbsp; -- Start with this as the base name.<br>&nbsp; &nbsp; &nbsp; &nbsp; local Name = L[&quot;TEXTLAYOUTS_DEFAULTS_ICON1&quot;]<br>&nbsp; &nbsp; &nbsp; &nbsp; repeat<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Loop until we find a name that isn&#x27;t used by any other layouts.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local found<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for k, layoutSettings in pairs(TMW.db.global.TextLayouts) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if layoutSettings.Name == Name then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- The current name is in use.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; found = true<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Increase the number at the end of the name (&quot;Icon Layout 1&quot; becomes &quot;Icon Layout 2&quot;, etc...)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Name = TMW.oneUpString(Name) or GUID -- fallback on the GUID if we cant increment the name for some reason<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Break the inner loop so that we can go through the outer loop again and check if the new name is in use.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; until not found<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- A unique name has now been determined. Set it on the layout.<br>&nbsp; &nbsp; &nbsp; &nbsp; layout.Name = Name<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- Store the layout under the new GUID in the TextLayouts table.<br>&nbsp; &nbsp; &nbsp; &nbsp; TMW.db.global.TextLayouts[GUID] = layout<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- Set the new layout to the group we are upgrading.<br>&nbsp; &nbsp; &nbsp; &nbsp; self:SetLayoutToGroup(gs, GUID)<br>&nbsp; &nbsp; end,<br>})</p><p>TMW:RegisterUpgrade(51002, {<br>&nbsp; &nbsp; -- This is the upgrade that handles the transition from TMW&#x27;s ghetto text substitutions to DogTag.<br><br>&nbsp; &nbsp; -- self.translateString is a function defined in the v51002 upgrade in TellMeWhen.lua.<br>&nbsp; &nbsp; -- It is the method that actually converts between the old and new text subs.<br><br>&nbsp; &nbsp; -- This upgrade extends this upgrade to text displays<br>&nbsp; &nbsp; -- (The old static text displays, not the new ones that are the whole purpose of this file.)<br><br>&nbsp; &nbsp; icon = function(self, ics)<br>&nbsp; &nbsp; &nbsp; &nbsp; local BindText = ics.BindText or &quot;&quot;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- Meta icons and default icons didn&#x27;t implement BindText, so don&#x27;t upgrade them.<br>&nbsp; &nbsp; &nbsp; &nbsp; if ics.Type ~= &quot;meta&quot; and ics.Type ~= &quot;&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ics.SettingsPerView.icon.Texts[1] = self:translateString(BindText)<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; ics.BindText = nil<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- The stack text display was static, and it already corresponds to the default text for this text display, so do nothing.<br>&nbsp; &nbsp; &nbsp; &nbsp; -- ics.SettingsPerView.icon.Texts[2] = &quot;[Stacks:Hide(0)]&quot;<br>&nbsp; &nbsp; end,<br>})</p><p>TMW:RegisterCallback(&quot;TMW_UPGRADE_REQUESTED&quot;, function(event, type, version, ...)<br>&nbsp; &nbsp; -- When a global settings upgrade is requested, update all text layouts.<br><br>&nbsp; &nbsp; if type == &quot;global&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; for GUID, settings in pairs(TMW.db.global.TextLayouts) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TMW:DoUpgrade(&quot;textlayout&quot;, version, settings, GUID)<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end<br>end)</p><p>function TEXT:GetTextLayoutForIconSettings(gs, ics, view)<br>&nbsp; &nbsp; -- arg3, view, is optional. Defaults to the current view<br><br>&nbsp; &nbsp; view = view or gs.View<br><br>&nbsp; &nbsp; -- Get the GUID defined by the icon for the current IconView<br>&nbsp; &nbsp; local GUID = ics.SettingsPerView[view].TextLayout<br><br>&nbsp; &nbsp; -- If the icon defines the GUID as a blank string,<br>&nbsp; &nbsp; -- it should default to whatever the group defines. (Intended behavior, btw.)<br>&nbsp; &nbsp; if not GUID or GUID == &quot;&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; GUID = gs.SettingsPerView[view].TextLayout<br>&nbsp; &nbsp; end<br><br>&nbsp; &nbsp; -- Rawget from TextLayouts to see if the layout exists.<br>&nbsp; &nbsp; local layoutSettings = GUID and rawget(TMW.db.global.TextLayouts, GUID)<br><br>&nbsp; &nbsp; local isFallback<br>&nbsp; &nbsp; if not layoutSettings then<br>&nbsp; &nbsp; &nbsp; &nbsp; isFallback = true<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- If the layout doesn&#x27;t exist, fall back on the default layout for the current IconView<br>&nbsp; &nbsp; &nbsp; &nbsp; local GroupDefaultsPerView = TMW.Group_Defaults.SettingsPerView<br>&nbsp; &nbsp; &nbsp; &nbsp; GUID = GroupDefaultsPerView[view] and GroupDefaultsPerView[view].TextLayout<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- If the current IconView doesn&#x27;t define a default layout (or if it doesn&#x27;t define DefaultsPerView),<br>&nbsp; &nbsp; &nbsp; &nbsp; -- then fall back on the default for all IconViews, GUID == &quot;&quot;, the blank layout<br>&nbsp; &nbsp; &nbsp; &nbsp; if not GUID then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GUID = &quot;&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- Attempt to find the layout settings again.<br>&nbsp; &nbsp; &nbsp; &nbsp; layoutSettings = rawget(TMW.db.global.TextLayouts, GUID)<br><br>&nbsp; &nbsp; &nbsp; &nbsp; -- Freak the fuck out if it wasn&#x27;t found;<br>&nbsp; &nbsp; &nbsp; &nbsp; -- Only happens if a view defines a default layout but doesn&#x27;t actually define layout itself.<br>&nbsp; &nbsp; &nbsp; &nbsp; assert(layoutSettings, (&quot;Couldn&#x27;t find default text layout with GUID %q for IconView %q&quot;):format(GUID, view))<br>&nbsp; &nbsp; end<br><br>&nbsp; &nbsp; return GUID, layoutSettings, isFallback<br>end</p><p>function TEXT:GetTextLayoutForIcon(icon, view)<br>&nbsp; &nbsp; return TEXT:GetTextLayoutForIconSettings(icon.group:GetSettings(), icon:GetSettings(), view)<br>end</p><p>function TEXT:GetTextFromSettingsAndLayout(Texts, layoutSettings, textID)<br>&nbsp; &nbsp; TMW:ValidateType(2, &quot;TEXT:GetTextForIconAndLayout()&quot;, Texts, &quot;table&quot;)<br>&nbsp; &nbsp; TMW:ValidateType(3, &quot;TEXT:GetTextForIconAndLayout()&quot;, layoutSettings, &quot;table&quot;)<br>&nbsp; &nbsp; TMW:ValidateType(4, &quot;TEXT:GetTextForIconAndLayout()&quot;, textID, &quot;number&quot;)<br><br>&nbsp; &nbsp; local text = Texts[textID]<br><br>&nbsp; &nbsp; if not text then<br>&nbsp; &nbsp; &nbsp; &nbsp; if textID &gt; layoutSettings.n then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; error(&quot;textID is out of range for the given layout!&quot;, 2)<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br><br>&nbsp; &nbsp; &nbsp; &nbsp; text = layoutSettings[textID].DefaultText<br>&nbsp; &nbsp; end<br><br>&nbsp; &nbsp; return text<br>end</p><p>-- -------------------<br>-- ICON MODULE<br>-- -------------------<br><br>local Texts = TMW:NewClass(&quot;IconModule_Texts&quot;, &quot;IconModule&quot;)</p><p>Texts:RegisterConfigPanel_XMLTemplate(400, &quot;TellMeWhen_TextDisplayOptions&quot;)</p><p>function Texts:OnNewInstance(icon)<br>&nbsp; &nbsp; self.kwargs = {} -- Stores the DogTag kwargs table that will be used by the module for all its text displays/FontStrings.<br>&nbsp; &nbsp; self.fontStrings = {} -- Stores all of the FontStrings that the midle has created.<br><br>&nbsp; &nbsp; self.container = CreateFrame(&quot;Frame&quot;, nil, icon)<br>&nbsp; &nbsp; self.container:SetAllPoints(icon)<br>&nbsp; &nbsp; self.container:SetFrameLevel(icon:GetFrameLevel() + 3)<br><br>&nbsp; &nbsp; -- We need to make sure that all strings that are Masque skinnable are always created<br>&nbsp; &nbsp; -- so that they can be available to IconModule_IconContainer_Masque when it requests them.<br>&nbsp; &nbsp; -- If Masque isn&#x27;t installed, then don&#x27;t bother - we will create them normally on demand.<br>&nbsp; &nbsp; if LMB then<br>&nbsp; &nbsp; &nbsp; &nbsp; for key in pairs(TEXT.MasqueSkinnableTexts) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if key ~= &quot;&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local fontString = self:CreateFontString(key)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self:SetSkinnableComponent(key, fontString)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end<br>end</p><p>function Texts:OnDisable()<br>&nbsp; &nbsp; for id, fontString in pairs(self.fontStrings) do<br><br>&nbsp; &nbsp; &nbsp; &nbsp; DogTag:RemoveFontString(fontString)<br><br>&nbsp; &nbsp; &nbsp; &nbsp; fontString:Hide()<br>&nbsp; &nbsp; end<br>end</p><p>function Texts:CreateFontString(id)<br>&nbsp; &nbsp; local container = self.container<br><br>&nbsp; &nbsp; local fontString = container:CreateFontString(self:GetChildNameBase() .. id, &quot;ARTWORK&quot;, &quot;NumberFontNormalSmall&quot;)<br><br>&nbsp; &nbsp; self.fontStrings[id] = fontString<br><br>&nbsp; &nbsp; return fontString<br>end</p><p>function Texts:SetupForIcon(sourceIcon)<br>&nbsp; &nbsp; local icon = self.icon<br><br><br>&nbsp; &nbsp; local Texts = sourceIcon:GetSettingsPerView().Texts<br>&nbsp; &nbsp; local _, layoutSettings = TMW.TEXT:GetTextLayoutForIcon(sourceIcon)<br>&nbsp; &nbsp; self.layoutSettings = layoutSettings<br>&nbsp; &nbsp; self.Texts = Texts<br><br>&nbsp; &nbsp; wipe(self.kwargs)<br>&nbsp; &nbsp; self.kwargs.icon = sourceIcon:GetGUID()<br>&nbsp; &nbsp; self.kwargs.unit = sourceIcon.attributes.dogTagUnit<br>&nbsp; &nbsp; --self.kwargs.shouldcolor = TMW.db.profile.ColorNames<br><br>&nbsp; &nbsp; for _, fontString in pairs(self.fontStrings) do<br>&nbsp; &nbsp; &nbsp; &nbsp; fontString.TMW_QueueForRemoval = true<br>&nbsp; &nbsp; end<br><br>&nbsp; &nbsp; if layoutSettings then<br>&nbsp; &nbsp; &nbsp; &nbsp; local IconModule_IconContainer_Masque = icon:GetModuleOrModuleChild(&quot;IconModule_IconContainer_Masque&quot;)<br>&nbsp; &nbsp; &nbsp; &nbsp; local isDefaultSkin = (not IconModule_IconContainer_Masque) or IconModule_IconContainer_Masque.isDefaultSkin<br><br>&nbsp; &nbsp; &nbsp; &nbsp; for fontStringID, fontStringSettings in TMW:InNLengthTable(layoutSettings) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fontStringID = self:GetFontStringID(fontStringID, fontStringSettings)<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local fontString = self.fontStrings[fontStringID] or self:CreateFontString(fontStringID)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fontString:Show()<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fontString.settings = fontStringSettings<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --fontString:SetWidth(fontStringSettings.ConstrainWidth and icon:GetWidth() or 0)<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if not LMB or isDefaultSkin or fontStringSettings.SkinAs == &quot;&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Font<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fontString:SetFont(LSM:Fetch(&quot;font&quot;, fontStringSettings.Name), fontStringSettings.Size, fontStringSettings.Outline)<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fontString:SetJustifyH(fontStringSettings.Justify)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br><br>&nbsp; &nbsp; &nbsp; &nbsp; for fontStringID, fontStringSettings in TMW:InNLengthTable(layoutSettings) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fontStringID = self:GetFontStringID(fontStringID, fontStringSettings)<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local fontString = self.fontStrings[fontStringID] or self:CreateFontString(fontStringID)<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if not LMB or isDefaultSkin or fontStringSettings.SkinAs == &quot;&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- Position<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fontString:ClearAllPoints()<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local func = fontString.__MSQ_SetPoint or fontString.SetPoint<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for n, anchorSettings in TMW:InNLengthTable(fontStringSettings.Anchors) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local relativeTo = anchorSettings.relativeTo<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if relativeTo:sub(1, 2) == &quot;$$&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; relativeTo = tonumber(relativeTo:sub(3))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if relativeTo &lt;= layoutSettings.n then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local fontStringSettingsOfAnchor = layoutSettings[relativeTo]<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; relativeTo = self:GetFontStringID(relativeTo, fontStringSettingsOfAnchor)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; relativeTo = self.fontStrings[relativeTo]<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; relativeTo = nil<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if not relativeTo then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TMW:Error(&quot;Couldn&#x27;t find the anchor %q for icon %q, font string %s&quot;, anchorSettings.relativeTo, icon:GetName(), fontStringID)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; relativeTo = icon<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; relativeTo = icon:GetName() .. relativeTo<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if not _G[relativeTo] then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if self.hasSetupOnce then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TMW:Error(&quot;Couldn&#x27;t find the anchor %q for icon %q, font string %s&quot;, anchorSettings.relativeTo, icon:GetName(), fontStringID)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; relativeTo = icon<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; func(fontString, anchorSettings.point, relativeTo, anchorSettings.relativePoint, anchorSettings.x, anchorSettings.y)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end<br><br>&nbsp; &nbsp; -- TMW_QueueForRemoval gets set to nil for valid stings in OnKwargsUpdated, among other things<br>&nbsp; &nbsp; self:OnKwargsUpdated()<br><br>&nbsp; &nbsp; for fontStringID, fontString in pairs(self.fontStrings) do<br>&nbsp; &nbsp; &nbsp; &nbsp; if fontString.TMW_QueueForRemoval then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fontString.TMW_QueueForRemoval = nil<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DogTag:RemoveFontString(fontString)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fontString:Hide()<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end<br>&nbsp; &nbsp; self.hasSetupOnce = true<br>end</p><p>function Texts:GetFontStringID(fontStringID, fontStringSettings)<br>&nbsp; &nbsp; local SkinAs = fontStringSettings.SkinAs<br>&nbsp; &nbsp; if SkinAs ~= &quot;&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; fontStringID = SkinAs<br>&nbsp; &nbsp; end<br>&nbsp; &nbsp; return fontStringID<br>end</p><p>function Texts:OnKwargsUpdated()<br>&nbsp; &nbsp; if self.layoutSettings and self.Texts then<br>&nbsp; &nbsp; &nbsp; &nbsp; for fontStringID, fontStringSettings in TMW:InNLengthTable(self.layoutSettings) do<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local fontString = self.fontStrings[self:GetFontStringID(fontStringID, fontStringSettings)]<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local text = TEXT:GetTextFromSettingsAndLayout(self.Texts, self.layoutSettings, fontStringID)<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if fontString and text and text ~= &quot;&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local styleString = &quot;&quot;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if fontStringSettings.Outline == &quot;OUTLINE&quot; or fontStringSettings.Outline == &quot;THICKOUTLINE&quot; or fontStringSettings.Outline == &quot;MONOCHROME&quot; then<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; styleString = styleString .. (&quot;[%s]&quot;):format(fontStringSettings.Outline)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fontString.TMW_QueueForRemoval = nil<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fontString:SetShadowOffset(fontStringSettings.Shadow, -fontStringSettings.Shadow)<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DogTag:AddFontString(fontString, self.icon, styleString .. text, &quot;TMW;Unit;Stats&quot;, self.kwargs)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; &nbsp; &nbsp; end<br>&nbsp; &nbsp; end<br>end</p><p>function Texts:DOGTAGUNIT(icon, dogTagUnit)<br>&nbsp; &nbsp; if self.kwargs.unit ~= dogTagUnit then<br>&nbsp; &nbsp; &nbsp; &nbsp; self.kwargs.unit = dogTagUnit<br>&nbsp; &nbsp; &nbsp; &nbsp; self:OnKwargsUpdated()<br>&nbsp; &nbsp; end<br>end<br>Texts:SetDataListner(&quot;DOGTAGUNIT&quot;)</p>
                        </div>
                    </div>
                </li>  

                
                        <li class="project-issue-event tag-management ">
                            <div class="user-event">
                                <span class="user-tag">
                                    
<div class="avatar avatar-16 user user-role-registered-user">
        <a href="/members/pankL">
            <img style="max-width: 16px" src="https://secure.gravatar.com/avatar/7cc3f2b225485dbadd611a9a99762b09?d=retro&amp;s=16"  alt="pankL&#x27;s avatar"
                onerror="if (this.src != 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y') this.src = 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y';" />
        </a>
    
</div>

                                    <a href="/members/pankL">pankL</a>
                                </span>
                                <span class="e-infoLabel">
                                    added the tags
                                    
                                        <span class="tag-tag">
                                            New
                                        </span>
                                    
                                        <span class="tag-tag">
                                            Defect
                                        </span>
                                    </span>
                                <span><abbr class="tip standard-date standard-datetime" title="01 20 2014 00:40:01 (CST) (UTC-6:00)" data-epoch="1390200001">Jan 20, 2014</abbr></span>
                            </div>
                        </li>
                    
                        <li class="project-issue-comment-container" data-target="project-issue-description">
                            
<div class="avatar avatar-48 user user-role-registered-user">
        <a href="/members/Cybeloras">
            <img style="max-width: 48px" src="https://media.forgecdn.net/avatars/thumbnails/64/275/48/48/636151561221451261.jpeg"  alt="Cybeloras&#x27;s avatar"
                onerror="if (this.src != 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y') this.src = 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y';" />
        </a>
    
</div>

                            <div class="project-issue-comment" data-target="project-issue-comment">
                                <header class="project-issue-comment-header">
                                    <span class="user-tag">
                                        <a href="/members/Cybeloras">Cybeloras</a>
                                    </span>
                                    <span class="e-infoLabel">posted a comment</span><span> <abbr class="tip standard-date standard-datetime" title="01 20 2014 15:21:55 (CST) (UTC-6:00)" data-epoch="1390252915">Jan 20, 2014</abbr></span>
                                    <div class="project-issue-comment-actions">
                                        
                                    </div>
                                </header>
                                <div class="project-issue-comment-body" data-target="project-issue-comment-body">
                                    <p>Uhhh, what? You just posted the contents of TellMeWhen\Components\IconModules\IconModule_Texts\Texts.lua. If there is an error, you need to post the error that you are getting. I already have this file.</p>

                                    <div class="project-issue-comment-body-modified">
                                        
                                    </div>
                                </div>
                                <div class="project-issue-comment-edit" data-target="project-issue-comment-edit"></div>
                            </div>
                        </li>
                    
                        <li class="project-issue-event tag-management ">
                            <div class="user-event">
                                <span class="user-tag">
                                    
<div class="avatar avatar-16 user user-role-registered-user">
        <a href="/members/Cybeloras">
            <img style="max-width: 16px" src="https://media.forgecdn.net/avatars/thumbnails/64/275/16/16/636151561221451261.jpeg"  alt="Cybeloras&#x27;s avatar"
                onerror="if (this.src != 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y') this.src = 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y';" />
        </a>
    
</div>

                                    <a href="/members/Cybeloras">Cybeloras</a>
                                </span>
                                <span class="e-infoLabel">
                                    removed a tag
                                    
                                        <span class="tag-tag">
                                            New
                                        </span>
                                    </span>
                                <span><abbr class="tip standard-date standard-datetime" title="01 20 2014 15:22:17 (CST) (UTC-6:00)" data-epoch="1390252937">Jan 20, 2014</abbr></span>
                            </div>
                        </li>
                    
                        <li class="project-issue-event tag-management ">
                            <div class="user-event">
                                <span class="user-tag">
                                    
<div class="avatar avatar-16 user user-role-registered-user">
        <a href="/members/Cybeloras">
            <img style="max-width: 16px" src="https://media.forgecdn.net/avatars/thumbnails/64/275/16/16/636151561221451261.jpeg"  alt="Cybeloras&#x27;s avatar"
                onerror="if (this.src != 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y') this.src = 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y';" />
        </a>
    
</div>

                                    <a href="/members/Cybeloras">Cybeloras</a>
                                </span>
                                <span class="e-infoLabel">
                                    added a tag
                                    
                                        <span class="tag-tag">
                                            Invalid
                                        </span>
                                    </span>
                                <span><abbr class="tip standard-date standard-datetime" title="01 20 2014 15:22:18 (CST) (UTC-6:00)" data-epoch="1390252938">Jan 20, 2014</abbr></span>
                            </div>
                        </li>
                    
                        <li class="project-issue-event status-change closed">
                            <div class="user-event">
                                <span class="user-tag">
                                    
<div class="avatar avatar-16 user user-role-registered-user">
        <a href="/members/Cybeloras">
            <img style="max-width: 16px" src="https://media.forgecdn.net/avatars/thumbnails/64/275/16/16/636151561221451261.jpeg"  alt="Cybeloras&#x27;s avatar"
                onerror="if (this.src != 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y') this.src = 'http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;f=y';" />
        </a>
    
</div>

                                    <a href="/members/Cybeloras">Cybeloras</a>
                                </span>
                                <span class="e-infoLabel">closed issue</span>
                                <span><abbr class="tip standard-date standard-datetime" title="01 20 2014 15:22:19 (CST) (UTC-6:00)" data-epoch="1390252939">Jan 20, 2014</abbr></span>
                            </div>
                        </li>
                    
            </ul>
            <div class="project-issue-timeline-actions">
                <hr/>
                
                    <p>
                        To post a comment, please 
                        <a href="/login?returnUrl=%2fprojects%2ftellmewhen%2fissues%2f918">login</a> 
                        or <a href="/register?returnUrl=%2fprojects%2ftellmewhen%2fissues%2f918">register</a> a new account.
                    </p>
                
            </div>
            
        </form>

                        
                    </section>
                </div>
            </div>
            
            <!-- Above Footer -->
            <section class="ad-container ad-container-footer">
                <div class="ad-bin">
                    
                </div>
            </section>
            <div id="footer-push"></div>
        </div>
        <footer id="footer">
            

<footer class="curseforge-footer">
    <nav class="curseforge-footer__container">
		<section class="curseforge-footer__section curseforge-footer__section--logo">
			<a href="https://twitch.tv" target="_blank" title="Twitch">
				<figure class="curseforge-footer__logo-container">
					<svg width="94px" height="32px" viewBox="0 0 94 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
						<title>Twitch</title>
						<defs></defs>
						<g id="logos/LogoTwitch" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
							<path class="curseforge-footer__logo" d="M88.5,5 L82.5,5 L82.5,0 L73.5,0 L67.5,5 L62,5 L59.5,7.5 L59.5,5 L54.5,5 L54.5,0 L36.5,0 L36.5,5 L16.5,5 L11.5,0 L0.5,0 L0.5,22 L5.5,27.25 L14.5,32 L20.5,32 L20.5,30.5 L23.5,32 L35.5,32 L37.5,29 L38.5,32 L45.5,32 L45.5,29 L48.5,32 L56.5,32 L57,29 L59.5,32 L69.5,32 L72.5,29 L72.5,32 L76.5,32 L79.5,29 L79.5,32 L86.5,32 L93.5,26 L93.5,10 L88.5,5 Z M13.5,13 L8.5,13 L8.5,19 L13.5,19 L13.5,25 L6.5,25 L2.5,21 L2.5,2 L8.5,2 L8.5,7 L13.5,7 L13.5,13 Z M36.5,21.5 L33,25 L15.5,25 L15.5,7 L21.5,7 L21.5,19 L23.5,19 L23.5,7 L29.5,7 L29.5,19 L31.5,19 L31.5,7 L36.5,7 L36.5,21.5 Z M44.5,25 L38.5,25 L38.5,7 L44.5,7 L44.5,25 Z M44.5,5 L38.5,5 L38.5,2 L44.5,2 L44.5,5 Z M57.5,13 L52.5,13 L52.5,19 L57.5,19 L57.5,25 L50.5,25 L46.5,21 L46.5,2 L52.5,2 L52.5,7 L57.5,7 L57.5,13 Z M72.5,13 L65.5,13 L65.5,19 L72.5,19 L72.5,25 L63.5,25 L59.5,21 L59.5,11 L63.5,7 L72.5,7 L72.5,13 Z M91.5,25 L85.5,25 L85.5,13 L80.5,13 L80.5,25 L74.5,25 L74.5,2 L80.5,2 L80.5,7 L87.5,7 L91.5,11 L91.5,25 Z" id="LogoTwitch" fill="#000000" fill-rule="nonzero"></path>
						</g>
					</svg>
				</figure>
			</a>
			<span class="curseforge-footer__copyright"> 2019 Twitch Interactive, Inc</span>
		</section>
		<section class="curseforge-footer__section">
			<a href="https://twitch.tv/p/about/" target="_blank" class="curseforge-footer__item">About</a>
			<a href="https://twitch.tv/jobs/" target="_blank" class="curseforge-footer__item">Careers</a>
			<a href="https://twitch.tv/blog/" target="_blank" class="curseforge-footer__item">Blog</a>
			<a href="https://twitch.tv/p/about/press-releases/" target="_blank" class="curseforge-footer__item">Press</a>
		</section>
		<section class="curseforge-footer__section">
			<a href="https://twitch.tv/p/brand/" target="_blank" class="curseforge-footer__item">Brand</a>
			<a href="https://music.twitch.tv/" target="_blank" class="curseforge-footer__item">Music</a>
			<a href="https://twitchadvertising.tv/" target="_blank" class="curseforge-footer__item">Advertise</a>
			<a href="https://twitch.tv/legal/ad-choices/" target="_blank" class="curseforge-footer__item">Ad Choices</a>
		</section>
		<section class="curseforge-footer__section">
			<a href="https://www.twitch.tv/prime/" target="_blank" class="curseforge-footer__item">Prime</a>
			<a href="https://twitch.tv/p/partners/" target="_blank" class="curseforge-footer__item">Partners</a>
			<a href="https://affiliate.twitch.tv/" target="_blank" class="curseforge-footer__item">Affiliates</a>
		</section>
		<section class="curseforge-footer__section">
			<a href="https://dev.twitch.tv/" target="_blank" class="curseforge-footer__item">Developers</a>
			<a href="https://support.curseforge.com/hc/en-us" target="_blank" class="curseforge-footer__item">Help</a>
			<a href="https://twitch.uservoice.com/forums/915910-game-mods-curseforge" target="_blank" class="curseforge-footer__item">Feedback</a>
		</section>
		<section class="curseforge-footer__section">
			<a href="https://twitch.tv/legal/terms-of-service/" target="_blank" class="curseforge-footer__item">Terms of Service</a>
			<a href="https://twitch.tv/legal/privacy-policy/" target="_blank" class="curseforge-footer__item">Privacy Policy</a>
			<a href="https://twitch.tv/legal/cookie-policy/" target="_blank" class="curseforge-footer__item">Cookie Policy</a>
		</section>
    </nav>
	<div class="curseforge-footer__copyright-container">
		<span class="curseforge-footer__copyright"> 2019 Twitch Interactive, Inc</span>
	</div>
</footer>

        </footer>
        
    </div>

    <!-- Layout End -->
    <div id="analytics">
        <!-- Google Analytics -->
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(
        ['_setAccount', 'UA-389142-3'],
        ['_setDomainName', 'curseforge.com'],
        ['_addIgnoredRef', 'curseforge.com'],
        ['_trackPageview'],
        ['b._setAccount', 'UA-389142-11'],
        ['b._setDomainName', 'curseforge.com'],
        ['b._addIgnoredRef', 'curseforge.com'],
        ['b._trackPageview']
);
(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
<!-- End Google Analytics -->
<!-- Lotame -->
<script src="https://tags.crwdcntrl.net/c/3613/cc.js?ns=_cc3613" id="LOTCC_3613"></script>
<script>
_cc3613.bcp();
</script>
<!-- End Lotame -->
    </div>

    
    

<script type="text/javascript">
    Cobalt.Device.initialize();
    Cobalt.Burger.initializeEarly();

    Cobalt.Constants.initialize({"StaticURL":"/Content/2-0-6977-32150","SkinPath":"/Content/2-0-6977-32150/Skins/WoW","MediaURL":"https://media.forgecdn.net/","AvatarURL":"https://media.forgecdn.net/avatars","AttachmentURL":"https://media.forgecdn.net/attachments","ActiveConfiguration":"production","PrivacyPolicyLastUpdated":"0"});
    
    Cobalt.Constants.BuildVersion = "2-0-6977-32150";
    Cobalt.Constants.IsDevelopment = false;
    Cobalt.Constants.IgnoredUserIDs = [];
    Cobalt.Constants.ServerTimestamp = 1550200715989.28
    Cobalt.Constants.FacebookAppID = "";
    Cobalt.Constants.QuoteCssClasses = "";
    Cobalt.User.EnabledLanguageIDs = [1,2,3,4,7,8,9,15,16];
    Cobalt.User.MaxQuoteDepth = 5;
    Cobalt.User.AuthToken = "";
    Cobalt.TinyMCE.extraPlugins = "";
    Cobalt.TinyMCE.extraButtons = "";
    Cobalt.TinyMCE.extraCustomPlugins = "";     

    // NOTE: if you need to debug into tinymce, then change the following line to tinymce.js
    Cobalt.TinyMCE.url = Cobalt.Constants.StaticURL + "/js/tinymce/tiny_mce/tinymce.min.js";
    Cobalt.TinyMCE.customPluginUrl = Cobalt.Constants.StaticURL + "/js/tinymce/custom_plugins";
    Cobalt.TinyMCE.skin_url = Cobalt.Constants.StaticURL + "/js/tinymce/custom_skin";
    
   
    
    Cobalt.Constants.SiteID = 10;
    Cobalt.Constants.SiteName = "WoW CurseForge";
    Cobalt.TinyMCE.fontColorEnabled = true;
    Cobalt.TinyMCE.fontSizeEnabled = true;
    Cobalt.TinyMCE.fontFamilyEnabled = true;
    Cobalt.TinyMCE.textAlignmentEnabled = true;
    Cobalt.TinyMCE.smiliesEnabled = true;
    Cobalt.TinyMCE.forceSimpleBBCodeEditor = false;  
    Cobalt.Constants.NestedQuotePreference  = 1;
    
    $.ajaxSetup({
        data: {},
        timeout: 30000
    });
    
    

    //bbcode entries
    
    Cobalt.Markup.customBBcodeButtons = [];    
    
    
    
    Cobalt.CMS.CobaltCss = ["/Content/2-0-6977-32150/Skins/Global-TinyMCE/css/compiled.css"];    
    Cobalt.CMS.ProjectCss = ["/Content/2-0-6977-32150/Skins/WoW/css/compiled.css"];

    // set the tracking id for google analytics on this site
    Cobalt.Analytics.trackingId = 'UA-389142-11';

</script>



<script>
    hljs.initHighlighting();
</script>
<script type="text/javascript">

    Cobalt.runOnLoad(function () {
        Cobalt.initialize([{dependency:Elerium.ProjectIssueDetails, priority:99, name:'Elerium.ProjectIssueDetails'},{dependency:Cobalt.TinyMCE, priority:99, name:'Cobalt.TinyMCE'},{dependency:Elerium.ProjectMobileSubMenu, priority:99, name:'Elerium.ProjectMobileSubMenu'},{dependency:Elerium.ProjectAnalytics, priority:99, name:'Elerium.ProjectAnalytics'},{dependency:Elerium.Favorite, priority:99, name:'Elerium.Favorite'},{dependency:Cobalt.Tabs, priority:99, name:'Cobalt.Tabs'},{dependency:Cobalt.NiceDates, priority:99, name:'Cobalt.NiceDates'},{dependency:Cobalt.Core, priority:99, name:'Cobalt.Core'},{dependency:Cobalt.Forms, priority:99, name:'Cobalt.Forms'},{dependency:Cobalt.UI, priority:99, name:'Cobalt.UI'},{dependency:Cobalt.Auth, priority:99, name:'Cobalt.Auth'},{dependency:Cobalt.Notifications, priority:99, name:'Cobalt.Notifications'},{dependency:Cobalt.Feedback, priority:99, name:'Cobalt.Feedback'},{dependency:Cobalt.WarningNotification, priority:99, name:'Cobalt.WarningNotification'},{dependency:Cobalt.Footer, priority:99, name:'Cobalt.Footer'},{dependency:Cobalt.Tidbit, priority:99, name:'Cobalt.Tidbit'},{dependency:Cobalt.BunnyEars, priority:99, name:'Cobalt.BunnyEars'},{dependency:Elerium.OverflowTip, priority:99, name:'Elerium.OverflowTip'},{dependency:Elerium.PostAction, priority:99, name:'Elerium.PostAction'},{dependency:Elerium.Analytics, priority:99, name:'Elerium.Analytics'},{dependency:Elerium.TwitchNurture, priority:99, name:'Elerium.TwitchNurture'}]);
    });

</script>
</body>
</html>
