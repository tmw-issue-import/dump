{"issue":{"title":"[CF 634] Conditions cannot track cooldown of charge-based spells with &gt;= 1 charge remaining ","body":" <p>TMW v6.0.3</p><p>These examples use a Demo Warlock with Hand of Gul'dan, but the issue is applicable to any charge-based spell.</p><p>This icon will correctly fade when HoG is cooling, then light up brightly when HoG's cooldown will expire in 4.5 seconds or less:<br>^1^T^SConditionAlpha^N0.5 ^SType^Sconditionicon ^SUnAlpha^N0.5 ^SConditions^T ^N1^T ^SType^SSPELLCHARGES ^SOperator^S&gt;= ^SName^SHand~`of~`Gul'dan ^t^N2^T ^SType^SSPELLCD ^SOperator^S&lt;= ^SName^SHand~`of~`Gul'dan ^SLevel^N4.5 ^t^Sn^N2 ^t^SName^SHand~`of~`Gul'dan ^SSettingsPerView^T ^Sicon^T ^STexts^T ^N2^S ^t^t^t^SShowWhen^N3 ^SCustomTex^S105174 ^SEnabled^B ^t^N60345^S~`~| ^Sicon^^</p><p>But this icon will not fade, even though HoG is 'cooling' (still recharging) — it will always remain lit as long as at least 1 charge remains:<br>^1^T^SConditionAlpha^N0.5 ^SType^Sconditionicon ^SUnAlpha^N0.5 ^SConditions^T ^N1^T ^SType^SSPELLCHARGES ^SOperator^S&gt; ^SName^SHand~`of~`Gul'dan ^t^N2^T ^SType^SSPELLCD ^SOperator^S&lt;= ^SName^SHand~`of~`Gul'dan ^SLevel^N4.5 ^t^Sn^N2 ^t^SName^SHand~`of~`Gul'dan ^SSettingsPerView^T ^Sicon^T ^STexts^T ^N2^S ^t^t^t^SShowWhen^N3 ^SCustomTex^S105174 ^SEnabled^B ^t^N60345^S~`~| ^Sicon^^</p><p>Note the only difference between the 2 icons is that the first one's conditions can succeed when HoG is at 0 charges. This causes the icon to proceed to the next part of the logical evaluation, \"Is the cooldown &lt;= 4.5 seconds?\" and, as long as HoG has ~zero~ charges, the icon will correctly determine this — it fades out until 4.5s before the 1st charge recovers, then lights up.</p><p>The second icon, however, only triggers if HoG has at least 1 charge remaining. The icon proceeds to the next part of the evaluation and decides — \"No, HoG is not on cooldown\" or \"No, the HoG cooldown is not &gt; 4.5 seconds\" even when the spell is recharging, and the time until the next charge is indeed &gt; 4.5s.</p><p>I think I understand, at a technical level, that this is because the game engine treats \"cooldowns\" and \"recharges\" differently in some way. If it is possible, then, it would be very useful for TMW's Condition system to be able to differentiate between the following 3 methods of gating spell usage:<br>- Spell cooldown (a time quantity)<br>- Spell recharge (a time quantity)<br>- Spell charges remaining (an integer quantity)</p><p>Maybe adding to the complexity is that \"Spell cooldown\" and \"Spell recharge\" seem to become unified / identical quantities IFF charges remaining = 0, or at least that's how TMW currently perceives it — Spell Cooldown is a valid check for time remaining until next charge, as long as the spell has zero current charges. At 1 or more charges, TMW always perceives the Spell Cooldown as \"0:00 (Usable)\", or at least that's what my trial-and-error seems to indicate.</p> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Lov3star\">Lov3star</a> | Imported from CurseForge issue <a href=\"https://wow.curseforge.com/projects/tellmewhen/issues/634\">#634</a> | <a href=\"https://github.com/tmw-issue-import/dump/blob/master/html/634.html\">Raw</a>","closed":true,"closed_at":"2012-09-19T21:33:39Z","created_at":"2012-09-19T13:32:26Z","updated_at":"2012-09-19T21:34:12Z","labels":["defect","resolved"]},"comments":[{"body":" <p>Added a spell charge time condition in r620. Let me know if this suits your needs or not.</p>\r\n<p>Marking ticket as fixed - I will assume that the new condition will solve the problem unless a response is received indicating otherwise.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 19 2012 16:34:12 (CST) (UTC-5:00)\" data-epoch=\"1348090452\">Sep 19, 2012</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2012-09-19T21:33:31Z"}]}