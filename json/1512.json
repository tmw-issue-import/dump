{"issue":{"title":"[CF 1512] Issues with setting DogTags ","body":" <p>Hey</p>\r\n<p>&nbsp;</p>\r\n<p>Starting with pre-patch, my costume dog-tags stopped updating. I'm using the following code:</p>\r\n<div>\n\n```\nTMW_ST.ScriptTexts = {}\r\n\r\nfunction TMW_ST:SetScriptText(name, text)\r\n    TMW_ST.ScriptTexts[name] = text\r\n    TMW:Fire(\"TMW_ST_VARIABLE_MODIFIED\", name)\r\nend\r\n\r\nlocal DogTag = LibStub(\"LibDogTag-3.0\", true)\r\nif DogTag then\r\n    DogTag:AddTag(\"TMW\", \"ST_GetScriptText\", {\r\n        code = function(name)\r\n            return TMW_ST.ScriptTexts[name] or \"\"\r\n        end,\r\n        arg = {\r\n            'name', 'string', '@req',\r\n        },\r\n        ret = \"string\",\r\n        doc = \"Return the value of a script variable\",\r\n        example = '[ST_GetScriptText(\"var1\")] =&gt; \"my var\"',\r\n        events = \"TMW_ST_VARIABLE_MODIFIED\",\r\n        category = \"Userland\"\r\n    })\r\nend\n```\n</div>\r\n<p>&nbsp;It used to be that firing&nbsp;\"TMW_ST_VARIABLE_MODIFIED\" would update the DogTag, however since 8.0 landed the DogTag code function won't get called again after initial icon setup. Any idea what might be causing this?</p>\r\n<p>&nbsp;</p> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/ariehg\">ariehg</a> | Imported from CurseForge issue <a href=\"https://wow.curseforge.com/projects/tellmewhen/issues/1512\">#1512</a> | <a href=\"https://github.com/tmw-issue-import/dump/blob/master/html/1512.html\">Raw</a>","closed":true,"closed_at":"2018-07-21T17:40:15Z","created_at":"2018-07-19T18:27:51Z","updated_at":"2018-07-21T17:40:15Z","labels":[]},"comments":[{"body":" <p>DogTag doesn't know about TMW's event system. You need to fire a DogTag event, not a TMW event.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2018-07-20T05:52:24Z"},{"body":" <p>Interesting - this code totally worked prior to 8.0. Was just assuming there was a bridge between the 2.&nbsp;</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/ariehg\">ariehg</a>","created_at":"2018-07-21T17:05:17Z"},{"body":" <p>There are a few that are passed along -&nbsp;TMW_COUNTER_MODIFIED,&nbsp;TMW_GLOBAL_UPDATE_POST, and most&nbsp;TMW_ICON_DATA_CHANGED_* events. Any others have to be done yourself:&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>TMW:RegisterCallback(\"TMW_EVENT_NAME\", DogTag.FireEvent, DogTag)</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2018-07-21T17:40:15Z"}]}