{"issue":{"title":"[CF 748] TMW chat spam ","body":" <p>What steps will reproduce the problem?<br>\r\n1. 2 persons with TMW in party with RU-ru client and names<br>\r\n2. One of them off<br>\r\n3. TWM start to send something to offline character<br>\r\n4. Chat is full of spam about non exist character in game.</p>\r\n<p>What do you expect to happen? What happens instead?<br>\r\nCheck is person online?..</p>\r\n<p>What version of TellMeWhen are you using? (\"The latest\" is not a version)<br>\r\n6.1.1</p>\r\n<p>Do you have an error log of what happened?<br>\r\nno</p>\r\n<p>Please provide any additional information below (including any export strings if applicable; see above.)<br>\r\nidk how to reproduce this, its very random, sometimes all is ok.<br>\r\nOnly /reload helps with this. I have no icons that affects players by name.</p> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/andar1l\">andar1l</a> | Imported from CurseForge issue <a href=\"https://wow.curseforge.com/projects/tellmewhen/issues/748\">#748</a> | <a href=\"https://github.com/tmw-issue-import/dump/blob/master/html/748.html\">Raw</a>","closed":true,"closed_at":"2013-01-28T00:08:34Z","created_at":"2013-01-16T16:52:17Z","updated_at":"2013-01-31T23:34:58Z","labels":["defect","declined"]},"comments":[{"body":"<strong>Attachment Added:</strong><a href=\"https://media.forgecdn.net/attachments/76/146/WoWScrnShot_011613_204826_cr.jpg\" target=\"_blank\"> WoWScrnShot_011613_204826_cr.jpg</a><br> <a class=\"e-avatar128 lightbox\" href=\"https://media.forgecdn.net/attachments/76/146/WoWScrnShot_011613_204826_cr.jpg\" title=\"WoWScrnShot_011613_204826_cr.jpg\"> <img src=\"https://media.forgecdn.net/attachments/thumbnails/76/146/126/126/WoWScrnShot_011613_204826_cr.jpg\"> </a> <div class=\"attachment-desc\"> <h4 class=\"attachment-title\">WoWScrnShot_011613_204826_cr.jpg</h4> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/andar1l\">andar1l</a>","created_at":"2013-01-16T16:52:17Z"},{"body":" <p>After looking into the problem, it seems to be an issue with AceComm and ChatThrottleLib - they don't stop sending multipart messages when the recipient of the message goes offline.</p>\r\n<p>This really should be a very rare occurrence, so unless you can convince Mikk that it is worth making drastic changes to these libraries, it is just going to have to stay the way it is.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-01-28T00:07:41Z"},{"body":" <p>Sad, but it's not rare problem.\r\nMaybe on EN servers this works fine but all my raiders with tmw have this bug. ;(</p>\r\n<p>However thanks. Will try to send ticket them.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"01 28 2013 14:36:55 (CST) (UTC-6:00)\" data-epoch=\"1359405415\">Jan 28, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/andar1l\">andar1l</a>","created_at":"2013-01-28T20:36:18Z"},{"body":" <p>Are all your raiders in the practice of logging off immediately after logging on? I just fail to see how this could be a frequent problem.</p>\r\n<p>I can always just add an option to remove this specific functionality. (This functionality is (I assume) coming from TMW's sharing of its class spell cache between players, which should only happen a very limited number of times shortly after installing and logging in with TellMeWhen.)</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"01 28 2013 22:04:55 (CST) (UTC-6:00)\" data-epoch=\"1359432295\">Jan 28, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-01-29T04:02:23Z"},{"body":" <p>It happens when<br></p>\r\n<ol><li>players go to alts for one or two bosses.<br>\r\n</li><li>we change some player by another one and first is leaving and logging on alt.<br>\r\n</li><li>dc at fight<br>\r\nor something that makes player from raid to relog/logoff (not only after logging on, player may be online like 30-120 minutes)\r\n</li></ol>\r\n<p>For my raid it's usual moves. ;(</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"01 29 2013 15:44:15 (CST) (UTC-6:00)\" data-epoch=\"1359495855\">Jan 29, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/andar1l\">andar1l</a>","created_at":"2013-01-29T21:41:32Z"},{"body":" <p>Are you still absolutely certain that it is TMW doing this? Do me a favor and type (paste) this in chat:</p>\r\n<div><div><div>\n\n```\n/run hooksecurefunc(\"SendAddonMessage\", function(a) print(a) end)\r\n\n```\n</div></div>\r\n</div><p>And tell me what gets outputted to your chat box when the player offline spam is happening</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"01 29 2013 23:41:15 (CST) (UTC-6:00)\" data-epoch=\"1359524475\">Jan 29, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-01-30T05:40:56Z"},{"body":" <p>D4 - one time<br>\r\nTMWClassSpells5 - spam<br>\r\nafter command</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"01 30 2013 13:06:28 (CST) (UTC-6:00)\" data-epoch=\"1359572788\">Jan 30, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/andar1l\">andar1l</a>","created_at":"2013-01-30T19:05:31Z"},{"body":" <p>Ok. The issue should go away if you upgrade to the latest alpha version of TellMeWhen, but it might start to happen again (although not as severely due to some optimizations and bug fixes that were made) as your fellow raiders upgrade once I release v6.1.2.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-01-31T05:25:34Z"},{"body":" <p>So i didn't understand you.<br>\r\nYou will fix this for one build and error may happen again in 6.1.2 and i must write you again?<br>\r\nOr it's temporary fix and i must write this to authors of AceComm and ChatThrottleLib?</p>\r\n<p>PS Thank you for your time and fix.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"01 31 2013 11:01:23 (CST) (UTC-6:00)\" data-epoch=\"1359651683\">Jan 31, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/andar1l\">andar1l</a>","created_at":"2013-01-31T16:43:17Z"},{"body":" <p>v6.1.2 (and the latest alpha versions, within the last few weeks or so) uses a different protocol for transferring this data. Part of the reason for this fix is that there was a bug in the old protocol that was causing large amounts of incorrect/corrupt data to be sent that should have never existed in the first place.</p>\r\n<p>v6.1.2 won't be sending nearly as much data (about 15KB or so) compared to about 333KB or so (although I think it could get much larger than this, but I still don't quite understand what the bug was that was causing this) that the protocol in 6.1.1 is/was sending.</p>\r\n<p>v6.1.2 won't accept data sent with 6.1.1's protocol, and 6.1.1 won't listen to data sent with 6.1.2, so there is no possibility for cross-contamination.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-01-31T18:06:53Z"},{"body":" <p>Thanks for explanation. </p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/andar1l\">andar1l</a>","created_at":"2013-01-31T23:34:58Z"}]}