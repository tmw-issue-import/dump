{"issue":{"title":"[CF 749] 5.2 PTR Crash ","body":" <p>What steps will reproduce the problem?<br>1. Log into the 5.2 PTR on a character with TellMeWhen enabled.</p><p>What do you expect to happen? What happens instead?<br>The PTR client crashes once the loading screen bar is complete, but this isn't happening to everyone.</p><p>What version of TellMeWhen are you using? (\"The latest\" is not a version)<br>6.1.1</p><p>Do you have an error log of what happened?<br>It will be included.</p><p>Please provide any additional information below (including any export strings if applicable; see above.)<br>Just to make sure nothing else interfered, I created a brand new Draenei Shaman (Sheandrah), entered the game once with no addons enabled, restarted the game, enabled only TellMeWhen on Sheandrah, and then entered the game.</p> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Kosouda\">Kosouda</a> | Imported from CurseForge issue <a href=\"https://wow.curseforge.com/projects/tellmewhen/issues/749\">#749</a> | <a href=\"https://github.com/tmw-issue-import/dump/blob/master/html/749.html\">Raw</a>","closed":true,"closed_at":"2013-01-25T16:11:34Z","created_at":"2013-01-22T08:58:40Z","updated_at":"2013-01-25T16:11:34Z","labels":["defect","resolved"]},"comments":[{"body":"<strong>Attachment Added:</strong><a href=\"https://media.forgecdn.net/attachments/76/154/2013-01-22_03.48.32_Crash_-_58080.txt\" target=\"_blank\"> 2013-01-22_03.48.32_Crash_-_58080.txt</a><br> <div class=\"attachment-desc\"> <h4 class=\"attachment-title\">2013-01-22_03.48.32_Crash_-_58080.txt</h4> <p>&lt;p&gt;Error Log for Sheandrah on 5.2 PTR&lt;/p&gt;</p> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Kosouda\">Kosouda</a>","created_at":"2013-01-22T08:58:40Z"},{"body":"<strong>Attachment Added:</strong><a href=\"https://media.forgecdn.net/attachments/76/155/TellMeWhen.lua\" target=\"_blank\"> TellMeWhen.lua</a><br> <div class=\"attachment-desc\"> <h4 class=\"attachment-title\">TellMeWhen.lua</h4> <p>&lt;p&gt;From the PTR folder&lt;/p&gt;</p> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Kosouda\">Kosouda</a>","created_at":"2013-01-22T08:58:40Z"},{"body":" <p>Unfortunately, I'm still not able to reproduce this. I even tried completely reinstalling the PTR, but everything is working perfectly for me, so I really have no idea what might be causing this aside from a bug on Blizzard's side of things.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-01-23T01:34:33Z"},{"body":" <p>Alright, I appreciate you trying. At least I've narrowed it down to something wrong that's most likely on my end. It might be worth it for me to try reinstalling the PTR too, though it was doing this with the first PTR build.</p>\r\n<p>I'll update here if it stops happening.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Kosouda\">Kosouda</a>","created_at":"2013-01-24T00:54:13Z"},{"body":" <p>Thanks for the SVs. That was the magic bullet. I actually fixed this problem in r691 before I even knew that it was causing any crashes.</p>\r\n<p>What happened is that for some reason that still baffles me to this day, TMW's cache of spells that it keeps to identify what spells belong to what class (among other things, like determining textures of spells of other classes that are entered by name) was getting corrupted. Spells from one class were leaking into another class's dataset, some spells were incorrectly set to a class name instead of just the number 1 as they should have been, and (this is what was causing the crash) somehow, spellIDs with horrendously large values were getting into the cache.</p>\r\n<p>The biggest one you had was 86,172,115,781, but the highest spellID in the game right now is somewhere around 140,000. This was causing an overflow error in WoW's code since the largest value for a signed 32-bit integer is 2,147,483,647.</p>\r\n<p>TL;DR: fixed in the latest alpha version of TellMeWhen: <a href=\"http://wow.curseforge.com/addons/tellmewhen/files/\" rel=\"nofollow\">http://wow.curseforge.com/addons/tellmewhen/files/</a></p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-01-24T04:35:42Z"},{"body":" <p>Hold that thought. It doesn't seem to be upgrading properly when loading your settings up with the latest alpha version of TMW.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-01-24T04:38:28Z"},{"body":" <p>Ok. All's fair in love and r697.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-01-24T05:01:48Z"},{"body":" <p>Haha yeah, I forgot the .lua file for a while, oops. Anyway, great to hear!</p>\r\n<p>And I enjoy reading the details too. The error was a floating point exception, so that explanation actually makes some sense.</p>\r\n<p>I've played around with this addon a whole lot on many different characters on Live, making some test icon and text layouts and forgetting to clean up all of them. So the error may have had something to do with that because I just copy/pasted my saved variables file from my live client folder to the PTR. I forget if I ever tried to log in without that file. Not sure why I didn't think of that.</p>\r\n<p>Oh well, thanks.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"01 24 2013 06:31:15 (CST) (UTC-6:00)\" data-epoch=\"1359030675\">Jan 24, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Kosouda\">Kosouda</a>","created_at":"2013-01-24T12:22:48Z"}]}