{"issue":{"title":"[CF 859] 'Show Timer' Forces ElvUI Timer/Memory Leak ","body":" <p><a href=\"http://i.imgur.com/kfQwRVt.jpg\" rel=\"nofollow\">http://i.imgur.com/kfQwRVt.jpg</a><br><a href=\"http://i.imgur.com/ACA5XJk.jpg\" rel=\"nofollow\">http://i.imgur.com/ACA5XJk.jpg</a></p><p>Self explanatory. v6.2.5. Showing a cooldown swing forces the ElvUI timer to appear, regardless if the option is ticked or not.</p> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a> | Imported from CurseForge issue <a href=\"https://wow.curseforge.com/projects/tellmewhen/issues/859\">#859</a> | <a href=\"https://github.com/tmw-issue-import/dump/blob/master/html/859.html\">Raw</a>","closed":true,"closed_at":"2013-09-21T02:01:23Z","created_at":"2013-09-16T01:53:47Z","updated_at":"2013-09-21T02:01:23Z","labels":["defect","resolved"]},"comments":[{"body":" <p>Unsure if this is related, but on the first attempt of Garrosh on this toon, I started memory leaking (or something) HARD.</p>\r\n<p><a href=\"http://i.imgur.com/oB97DpU.jpg\" rel=\"nofollow\">http://i.imgur.com/oB97DpU.jpg</a></p>\r\n<p>A lot of my icons have 'show timer' and 'show elvui timer text' ticked, so maybe they're trying to double up on themselves or something? Dunno.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 15 2013 21:17:08 (CDT) (UTC-5:00)\" data-epoch=\"1379297828\">Sep 15, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-16T02:14:56Z"},{"body":" <p>And definitely zero LUA errors.</p>\r\n<p>I sorta want to say that that the memory leak has to do something with the ElvUI text forwarding thing. I stopped lagging after I crashed, but TMW was still jumping up to like 30MB+ usage. No clue why. Will probably jump back down to 6.2.4 in the meantime, just to be safe.</p>\r\n<p>E: Memory leaky things still happens in 6.2.4, but I don't get massive lag like I had before. So no clue what it is, really. I don't remember seeing this before, ever, so maybe something to do w/6.2.4/5's timer issues? Just thinking of something, dunno.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 15 2013 23:16:05 (CDT) (UTC-5:00)\" data-epoch=\"1379304965\">Sep 15, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-16T02:30:04Z"},{"body":" <p>Because Elv removed the code that allows that option to work. There isn't anything that I can do about it besides completely remove support for ElvUI's timers until he fixes it.</p>\r\n<p>I can hack in some code that will force it to work, but that is an ugly fix.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 16 2013 00:04:46 (CDT) (UTC-5:00)\" data-epoch=\"1379307886\">Sep 16, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-16T04:14:49Z"},{"body":" <p>I thought he removed the code that allowed us to specify which auras the Elv timer can hook too? Or does the 'fix' you implement force it to hook to anything w/timer swing, just based on how it was wrote? And is this (in some related way, at least) the deal with the memory leaks and whatnot?</p>\r\n<p>If so, fucking christ. Damnit Elv.</p>\r\n<p>PS: Clutch says hi.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 15 2013 23:30:01 (CDT) (UTC-5:00)\" data-epoch=\"1379305801\">Sep 15, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-16T04:29:44Z"},{"body":" <p>I added a hack to change this in 6.2.5-1-g5c66208 since my ticket for ElvUI hasn't gotten a response: <a href=\"http://www.tukui.org/tickets/elvui/index.php?page=bug_show&bug_id=363\" rel=\"nofollow\">http://www.tukui.org/tickets/elvui/index.php?page=bug_show&amp;bug_id=363</a></p>\r\n<p>His fix requires me to registere every cooldown sweep that TMW creates with ElvUI so that it will have timers created on it. However, when he changed this, he also removed the code that checks for the variable that is modified by the TMW setting to enable/disable ElvUI's timer texts, so the setting is (was before the hack I just added, anyway) effectively useless.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 15 2013 23:34:43 (CDT) (UTC-5:00)\" data-epoch=\"1379306083\">Sep 15, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-16T04:31:49Z"},{"body":" <p>Yeah I've been monitoring that thread hoping for a response. No luck. I remember making a ticket about this on day one, and Elv's response was something like \"I'm not going to fix other people's addons\". Fucking dumb point of view if you ask me.</p>\r\n<p>Forgive me it went over my head, but does something in this explain the memory leak thingy? Just curious.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-16T04:46:05Z"},{"body":" <p>It could be the result of me calling his code to register the cooldown sweep with his system, but it doesn't seem likely to me. I haven't got the slightest clue what might be causing it, though.</p>\r\n<p>Does it happen when fighting training dummies? Or any other boss? Or was it only on Garrosh?</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-16T04:52:58Z"},{"body":" <p>It was only Garrosh. And honestly, only the first two attempts. After that, I tried messing with some settings to fix the double overlapped text, and it then caused OmniCC to kinda shit out (see my other ticket, I updated the OmniCC issue). After that, the game crashed, I came back, and didn't lag anymore. When I checked the TMW usage, it was still high (30+ at times), but it didn't make the game freeze for a second or two every now and then. For all I know this has been happening for months, but I just never checked. I doubt that, though.</p>\r\n<p>I'll keep an eye on it, test it a bit on dummies and other bosses and update this ticket if necessary.</p>\r\n<p>E: The 6.2.5-1-g5c66208 version has no memory leaks of sorts on training dummies. And the ElvUI timers now work only when it's checked to, as I'm sure you know. I'll maybe do some flex or LFR and update.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 16 2013 00:20:55 (CDT) (UTC-5:00)\" data-epoch=\"1379308855\">Sep 16, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-16T05:00:15Z"},{"body":" <p>Memory leaks are still prevalent based on heroics I've been doing. It's not as severe as it was when I first reported it, but it's still there for sure.</p>\r\n<p>On another note, when I restarted my client, OmniCC text disappeared. No LUA of course.</p>\r\n<p>E: It also came back after a reload.\r\nE2: For what it matters, this seems to only happen in a raid. Hitting a dummy really does nothing to TMW's memory usage. It seems to increase in size by like 0.1-3MB per second or so, if this matters. If you want, I can send you my TMW profile and you can see if there's something in it, dunno.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 18 2013 05:01:45 (CDT) (UTC-5:00)\" data-epoch=\"1379498505\">Sep 18, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-18T05:06:37Z"},{"body":" <p>Yeah, having your profile would definitely help. </p>\r\n<p>I have been experiencing some memory issues myself this morning. Not addon related, though. Wow.exe increases it's memory usage by 2gb each time I reload until it has exhausted all my system's memory at 9.5 gb, which is absurd. This morning was the first time that I noticed this, which is strange. I don't know if it might be related to the issues that you are having, but it does lead me to believe that they aren't the fault of TellMeWhen since they have only come up in 5.4 and I haven't gotten a single report of memory usage issues since TMW v2.</p>\r\n<p>Patch 5.4 has been a disaster as far as bugs and stability issues go, ugh. </p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-18T20:45:12Z"},{"body":" <p>I'll throw you my profile after raid. Will be 5+ hours from now.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-18T23:25:33Z"},{"body":" <p><a href=\"http://pastebin.com/EHqjFZeZ\" rel=\"nofollow\">http://pastebin.com/EHqjFZeZ</a></p>\r\n<p>Nevermind it's here now.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-18T23:51:13Z"},{"body":" <p>Curse.com managed to lose all but your original message in the PM you sent me. Here is what I sent you a few hours ago that got lost (Lazarus forum recovery has got to be the greatest Firefox addon ever):</p>\r\n<p>Curseforge is down atm, so i will send you this here. Import this:</p>\r\n<p><code>^1^T^SName^STimer~`Diagnostic~`(~`/tmwtd~`) ^SCode^Slocal~`DATASTRING~J ~J StaticPopupDialogs[\"TMW_TIMERDIAG\"]~`=~`{~J ~`~`~`~`text~`=~`\"%s\\r\\n\\r\\nCopy~`the~`data~`below~`(press~`Ctrl+C~`to~`copy~`it~`to~`your~`clipboard)~`and~`send~`it~`to~`Cyb~`along~`with~`the~`screenshot~`that~`was~`taken.\",~`~J ~`~`~`~`button1~`=~`OKAY,~J ~`~`~`~`timeout~`=~`0,~J ~`~`~`~`showAlert~`=~`true,~J ~`~`~`~`whileDead~`=~`true,~J ~`~`~`~`preferredIndex~`=~`3,~`--~`<a href=\"http://forums.wowace.com/showthread.php?p=320956~J\" rel=\"nofollow\">http://forums.wowace.com/showthread.php?p=320956~J</a> ~`~`~`~`hasEditBox~`=~`1,~J ~`~`~`~`OnShow~`=~`function(self)~J ~`~`~`~`~`~`~`~`self.editBox:SetText(DATASTRING)~J ~`~`~`~`~`~`~`~`self.editBox:HighlightText()~J ~`~`~`~`~`~`~`~`self.editBox:SetFocus()~J ~`~`~`~`end,~J }~J ~J ~J local~`function~`DOTHINGS()~J ~`~`~`~`local~`OUT~`=~`{}~J ~`~`~`~`~J ~`~`~`~`for~`icon~`in~`TMW:InIcons()~`do~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`local~`cd~`=~`icon:GetModuleOrModuleChild(\"IconModule_CooldownSweep\")~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`--~`print(cd)~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`local~`timer~`=~`cd~`and~`cd.cooldown~`and~`cd.cooldown.omnicc~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`OUT[icon:GetName()]~`=~`{~J ~`~`~`~`~`~`~`~`~`~`~`~`attributes~`=~`icon.attributes,~J ~`~`~`~`~`~`~`~`~`~`~`~`icon~`=~`{~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`Enabled~`=~`icon.Enabled,~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`Shown~`=~`icon:IsShown(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`Visible~`=~`icon:IsVisible(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`Alpha~`=~`icon:GetAlpha(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`~`~`~`~`},~J ~`~`~`~`~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`~`~`~`~`cd~`=~`cd~`and~`{~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`ClockGCD~`=~`cd.ClockGCD,~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`IsEnabled~`=~`cd.IsEnabled,~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`IsImplemented~`=~`cd.IsImplemented,~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`ShowTimer~`=~`cd.ShowTimer,~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`ShowTimerText~`=~`cd.ShowTimerText,~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`ShowTimerTextnoOCC~`=~`cd.ShowTimerTextnoOCC,~J ~`~`~`~`~`~`~`~`~`~`~`~`},~J ~`~`~`~`~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`~`~`~`~`cd~`=~`cd~`and~`cd.cooldown~`and~`{~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`duration~`=~`cd.cooldown.duration,~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`start~`=~`cd.cooldown.start,~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`noCooldownCount~`=~`cd.cooldown.noCooldownCount,~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`noOCC~`=~`cd.cooldown.noOCC,~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`cdShown~`=~`cd.cooldown:IsShown(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`cdVisible~`=~`cd.cooldown:IsVisible(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`cdAlpha~`=~`cd.cooldown:GetAlpha(),~J ~`~`~`~`~`~`~`~`~`~`~`~`},~J ~`~`~`~`~`~`~`~`~`~`~`~`timer~`=~`timer~`and~`{~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`timerabRation~`=~`timer.abRatio,~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`timerShown~`=~`timer:IsShown(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`timerVisible~`=~`timer:IsVisible(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`timerAlpha~`=~`timer:GetAlpha(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`timerSettings~`=~`timer:GetSettings(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`timertextShown~`=~`timer.text:IsShown(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`timertextVisible~`=~`timer.text:IsVisible(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`timertextAlpha~`=~`timer.text:GetAlpha(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`timertextText~`=~`timer.text:GetText(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`timerRemain~`=~`timer.start~`and~`timer:GetRemain(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`timeroverallScale~`=~`timer.abRatio~`*~`(timer:GetEffectiveScale()/UIParent:GetScale()),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`timerShouldShow~`=~`timer:ShouldShow(),~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`timerExpectedText~`=~`timer.start~`and~`timer:GetTimeText(timer:GetRemain()),~J ~`~`~`~`~`~`~`~`~`~`~`~`}~J ~`~`~`~`~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`}~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`end~J ~`~`~`~`~J ~`~`~`~`Screenshot()~J ~`~`~`~`local~`screenshotInfo~`=~`format(\"Captured~`screenshot:~`WoWScrnShot_%s\",~`date():gsub(\"[/:]\",~`\"\"):gsub(\"~`\",~`\"_\"))~J ~`~`~`~`DATASTRING~`=~`TMW:MakeSerializedDataPretty(TMW:Serialize(OUT))~J ~`~`~`~`~J ~`~`~`~`StaticPopup_Show(\"TMW_TIMERDIAG\",~`screenshotInfo)~J ~`~`~`~`~J end~J ~J ~J TMW:RegisterChatCommand(\"tmwtd\",~`DOTHINGS)~J ~J ~J ^t^N70009^S~`~| ^Scodesnippet^^</code></p>\r\n<p>The next time your timers are screwed up, type /tmwtd. It will pop up a dialog that will have a string, copy that string and put it in that ticket we were working in (or PM me if curseforge is still down). It will also take a screenshot; upload that screenshot as well and include in with the string.</p>\r\n<p>You need to run the command when things are broken and you are in combat and there should be timers shown but aren't. The data will be a snapshot of a bunch of relevant attributes and information that will tell me what is aware of your current timers and what isn't.</p>\r\n<p>It would also help if you labeled the groupID of each group in the screenshot, but I suppose having the export string of your profile would accomplish that as well.</p>\r\n<p>Thanks for working with me on this one. I want to get this figured out because this whole situation is just bizarre.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 19 2013 13:45:51 (CDT) (UTC-5:00)\" data-epoch=\"1379616351\">Sep 19, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-19T05:37:44Z"},{"body":" <p>You say I have to run this in combat when the timers are broken. Does that mean it won't work if timers aren't broken? Because just testing the command does not seem to do anything.</p>\r\n<p><a href=\"http://i.imgur.com/xU9JNJp.jpg\" rel=\"nofollow\">http://i.imgur.com/xU9JNJp.jpg</a> for reference on the import. </p>\r\n<p>And yes, this import was after you edited your original post. I noticed that one had some crossed out text and had some error shit.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 19 2013 00:45:29 (CDT) (UTC-5:00)\" data-epoch=\"1379569529\">Sep 19, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-19T05:43:11Z"},{"body":" <p>You need to run the snippet manually or reload your UI for the code to run.</p>\r\n<p>It will work if timers aren't broken, but it won't give any interesting data.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-19T08:10:12Z"},{"body":" <p><a href=\"http://pastebin.com/t5ghdfqk\" rel=\"nofollow\">http://pastebin.com/t5ghdfqk</a></p>\r\n<p>I get that LUA error when I try to run the script. Unless of course that LUA error is the spitout you were referring to the in the first place.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-19T09:36:56Z"},{"body":" <p>I edited my comment with a fixed version. Try again. Sorry. I wrote it for the version of OmniCC I was using, but it was apparently slightly out of date.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-19T18:46:42Z"},{"body":" <p>With that version I get <a href=\"http://pastebin.com/qGbFAgXA\" rel=\"nofollow\">http://pastebin.com/qGbFAgXA</a> for a LUA.</p>\r\n<p>E: Would it just be more efficient if I turned off every addon except TMW and OmniCC? Or does some other addon possibly comingling have the possibility of being important in the final readout?</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 19 2013 13:58:06 (CDT) (UTC-5:00)\" data-epoch=\"1379617086\">Sep 19, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-19T18:56:55Z"},{"body":" <p>You need to run the code before you try the command again. You are still using the old one. Make sure you also delete the old one.</p>\r\n<p>Leave everything enabled.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 19 2013 14:14:58 (CDT) (UTC-5:00)\" data-epoch=\"1379618098\">Sep 19, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-19T19:10:49Z"},{"body":" <p>Ok, that one worked. Doing LFR with a friend real quick, will go try to break OmniCC after that. Should be an hour or two, before it's been pretty consistent with breaking OmniCC after a relog.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-19T19:14:03Z"},{"body":" <p>Other ticket is now updated with pastebin + images.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-19T20:01:42Z"},{"body":" <p>Out of curiosity, is there any troubleshooting you want me to do on my end for this ticket?</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-19T21:23:15Z"},{"body":" <p>Can you try to see if you can reproduce the issue with TellMeWhen as the only addon enabled (even disable OmniCC)? Try running LFR (so your guild doesn't get pissed for your inevitable poor performance due to other missing addons, haha) and see if TMW's memory usage still gets out of control.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-20T18:17:26Z"},{"body":" <p>Sure. Lemme see what happens.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-20T18:46:21Z"},{"body":" <p><a href=\"http://i.imgur.com/zBtNnrY.jpg\" rel=\"nofollow\">http://i.imgur.com/zBtNnrY.jpg</a></p>\r\n<p><a href=\"http://i.imgur.com/LKLVSY4.jpg\" rel=\"nofollow\">http://i.imgur.com/LKLVSY4.jpg</a></p>\r\n<p><a href=\"http://i.imgur.com/og3itRo.jpg\" rel=\"nofollow\">http://i.imgur.com/og3itRo.jpg</a></p>\r\n<p>This was on my rogue compared to my warrior, if that matters. The original 'memory leak' I had was on him, so it shouldn't.</p>\r\n<p>One thing I noticed is that it'd climb up to around 25MB on TellMeWhen as a ceiling, then immediately reset back to 11MB. Not sure if some sorta \"safeguard\" is kicking in and resetting, or maybe Blizzard is just tracking the usage improperly? It also seemed to gain memory usage by about 0.1-0.3MB/s</p>\r\n<p>I also believe with no addons it climbed lower than with addons, if that matters. Probably because no interactions with Elv/OmniCC but you'd know better than me.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 20 2013 14:10:47 (CDT) (UTC-5:00)\" data-epoch=\"1379704247\">Sep 20, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-20T19:06:41Z"},{"body":" <p>Could I get your rogue's profile export string too? Thanks. (I want to look for similarities between them; icons they both share, etc.)</p>\r\n<p>The reason it goes back down is because the garbage collector kicks in. Brief explanation:</p>\r\n<p>Most scripting languages (like Lua) (and also some other languages like Java/JVM languages and C#/other CLR languages) have their memory managed automatically so that the software itself doesn't have to worry about letting the operating system know what memory is no longer in use. This is called garbage collection. When I create some tables or functions in Lua, the Lua interpreter (which is built into WoW.exe) allocates some memory from the operating system. That memory stays allocated until Lua can determine that it is no longer used - the objects may still exist and they may contain some data, but they cannot be accessed in any way with any amount of code, so Lua un-allocates that memory and gives it back to the operating system.</p>\r\n<p>WoW's Lua environment is configured in such a way that garbage collection is never run in combat unless it absolutely has to (because it could cause a slight lag/general sluggishness if the garbage collector is running all the time) in order to allocate some more memory for an addon that needs it.</p>\r\n<p>Knowing that this is happening is actually very helpful because it tells me something - this isn't an issue with excess widgets (frames, button, checkboxes, dropdowns, textures, font strings, cooldown sweeps, progress bars, etc.) being created because they aren't garbage collected. Now I just have to get myself into LFR and see if I can figure out why this is happening. Which could be tricky.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 20 2013 16:19:51 (CDT) (UTC-5:00)\" data-epoch=\"1379711991\">Sep 20, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-20T21:19:07Z"},{"body":" <p>Oh, one more thing. Could you try and see if you could reproduce this issue while solo in an old raid - Karazhan or Tempest Keep or whatever, just note what raids you tried and what the result was. Reload your UI between each raid if you try more than one.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 20 2013 16:22:18 (CDT) (UTC-5:00)\" data-epoch=\"1379712138\">Sep 20, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-20T21:22:18Z"},{"body":" <p><a href=\"http://pastebin.com/pQA8mRqm\" rel=\"nofollow\">http://pastebin.com/pQA8mRqm</a> Rogue's profile.</p>\r\n<p>Some things are the same, but some aren't, such as G12+G13, as I don't raid on my rogue, so all the up to date auras for fights like H Thok or whatnot aren't there.</p>\r\n<p>I'll go back to Karazhan on my rogue and see what happens. I need to go there anyway.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-20T21:43:05Z"},{"body":" <p>And one more thing - if you do get a chance to be in a situation where you are able to reproduce the issue, rename or move or delete the World Of Warcraft\\Interface\\AddOns\\TellMeWhen\\Components\\EventHandlers\\Animations folder and then reload your UI. Then see if the issue persists.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-20T21:43:38Z"},{"body":" <p>Also, do you want me to run those old instances without any addons except TMW again? Last test also had Addon Control Panel, but I don't think that matters.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Freeebo\">Freeebo</a>","created_at":"2013-09-20T21:44:16Z"},{"body":" <p>Are you on US servers? If so, add me - <del>&lt;Redacted&gt;</del> good deal!</p>\r\n<p>I suppose it doesn't matter if you keep the rest of your addons enabled since it is clear that the issue happens either way.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 20 2013 16:50:35 (CDT) (UTC-5:00)\" data-epoch=\"1379713835\">Sep 20, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-20T21:46:46Z"},{"body":" <p>After a lot of back and forth trying out different things between Freeebo and I, including an LFR run where I averaged 36k DPS because I was playing around with code the entire run and where I finally figured out the problem by accident when I died on Immerseus and thought to look at my memory usage for the hell of it, this problem has been fixed.</p>\r\n<p>The issue was in LibDogTag-Unit-3.0's Auras module where a metamethod was getting invoked when it should not have been, causing a huge amount of extra tables to be created beyond what was actually needed. This bug has existed since March 22, 2008 when the Auras module was first written and has also been reported many times in the comments at <a href=\"http://www.wowace.com/addons/libdogtag-3-0/\" rel=\"nofollow\">http://www.wowace.com/addons/libdogtag-3-0/</a></p>\r\n<p>The fix will be available when CurseForge's packager comes back online, whenever that may be.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-09-21T01:59:12Z"}]}