{"issue":{"title":"[CF 735] Event tab lua error ","body":" <p>This error happens when you change the Operator, such as \"On Stack/Alpha/Duration Change\".</p>\r\n<p>Version</p>\r\n<blockquote><cite>Quote:</cite><p>1x TellMeWhen-r691\\Options\\TellMeWhen_Options-r691.lua:3690: attempt to call method \"GetEventSettings\" (a nil value)<br>\r\nTellMeWhen-r691\\Options\\TellMeWhen_Options-r691.lua:3690: in function \"func\"<br>\r\nFrameXML\\UIDropDownMenu.lua:710: in function \"UIDropDownMenuButton_OnClick\"<br>\r\n&lt;string&gt;:\"*:OnClick\":1: in function &lt;string&gt;:\"*:OnClick\":1</p>\r\n<p>Locals:<br>\r\nself = DropDownList1Button4 {<br> 0 = &lt;userdata&gt;<br> tooltipOnButton = true<br> arg1 = TellMeWhen_IconEditorEventsEventSettingsContainerOperator {}<br> value = \"&gt;=\"<br> func = &lt;func&gt; @TellMeWhen\\Options\\TellMeWhen_Options.lua:3687<br> tooltipTitle = \"大於或者等於\"<br>\r\n}<br>\r\nchecked = nil<br>\r\nplaySound = true<br>\r\nfunc = &lt;func&gt; @TellMeWhen\\Options\\TellMeWhen_Options.lua:3687</p>\r\n</blockquote> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/lsjyzjl\">lsjyzjl</a> | Imported from CurseForge issue <a href=\"https://wow.curseforge.com/projects/tellmewhen/issues/735\">#735</a> | <a href=\"https://github.com/tmw-issue-import/dump/blob/master/html/735.html\">Raw</a>","closed":true,"closed_at":"2013-01-02T22:47:33Z","created_at":"2012-12-19T02:18:40Z","updated_at":"2013-01-02T22:47:33Z","labels":["defect"]},"comments":[{"body":" <p>When you choice some icons at On Icon Shown or On Icon Hide will \"GetEventSettings\" (a nil value) too.</p>\r\n<blockquote><cite>Quote:</cite><p>1x TellMeWhen-r691\\Options\\TellMeWhen_Options-r691.lua:3741: attempt to call method \"GetEventSettings\" (a nil value)<br>\r\nTellMeWhen-r691\\Options\\TellMeWhen_Options-r691.lua:3741: in function \"func\"<br>\r\nFrameXML\\UIDropDownMenu.lua:710: in function \"UIDropDownMenuButton_OnClick\"<br>\r\n&lt;string&gt;:\"*:OnClick\":1: in function &lt;string&gt;:\"*:OnClick\":1</p>\r\n<p>Locals:<br>\r\nself = DropDownList2Button1 {<br> 0 = &lt;userdata&gt;<br> tooltipOnButton = true<br> tooltipText = \"群組: OnStartTest (3), 圖示: 1<br>\r\n法術冷卻\"<br> arg1 = TellMeWhen_IconEditorEventsEventSettingsContainerIcon {}<br> value = \"TellMeWhen_Group3_Icon1\"<br> func = &lt;func&gt; @TellMeWhen\\Options\\TellMeWhen_Options.lua:3735<br> tooltipTitle = \"23922\"<br>\r\n}<br>\r\nchecked = nil<br>\r\nplaySound = true<br>\r\nfunc = &lt;func&gt; @TellMeWhen\\Options\\TellMeWhen_Options.lua:3735</p>\r\n</blockquote> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/lsjyzjl\">lsjyzjl</a>","created_at":"2012-12-22T05:32:00Z"},{"body":" <p>Event On Start not work.</p>\r\n<p>test string:</p>\r\n<blockquote><cite>Quote:</cite><p>^1^T^SPoint^T ^Sy^F-8911058606061451 ^f-48^Sx ^F5695395800830752^f-47 ^t^SScale^F4585091263102976 ^f-51^SRows ^N2^SEnabled ^B^SColumns ^N1^SIcons ^T^N1^T ^SType^Sbuff ^SSourceUnit^Splayer ^SName^S132404 ^SEvents^T ^N1^T ^SPassingCndt^B ^SType^SAnnouncements ^SCndtJustPassed^B ^SChannel^SEMOTE ^SLocation^S綜合 ^SText^S[Spell]Start ^SEvent^SOnStart ^t^N2^T ^SType^SAnnouncements ^SChannel^SEMOTE ^SLocation^S綜合 ^SText^S[Spell]Finish ^SEvent^SOnFinish ^t^Sn^N2 ^t^SSettingsPerView^T ^Sicon^T ^STexts^T ^N1^S[Duration] ^t^t^Sbar^T ^STexts^T ^N1^S[Source] ^t^t^t^SShowWhen^N3 ^SEnabled^B ^SCLEUEvents^T ^SSPELL_DAMAGE_CRIT^B ^SSPELL_MISSED^B ^SSPELL_DAMAGE^B ^SSWING_MISSED^B ^SSWING_DAMAGE^B ^t^t^N2^T ^SType^Scooldown ^SSourceUnit^Splayer ^SName^S23922 ^SEvents^T ^N1^T ^SPassingCndt^B ^SType^SAnnouncements ^SCndtJustPassed^B ^SChannel^SEMOTE ^SLocation^S綜合 ^SText^S[Spell]Start ^SEvent^SOnStart ^t^N2^T ^SType^SAnnouncements ^SChannel^SEMOTE ^SLocation^S綜合 ^SText^S[Spell]Finish ^SEvent^SOnFinish ^t^Sn^N2 ^t^SSettingsPerView^T ^Sicon^T ^STexts^T ^N1^S[Duration] ^t^t^Sbar^T ^STexts^T ^N1^S[Source] ^t^t^t^SShowWhen^N3 ^SCLEUEvents^T ^SSPELL_DAMAGE_CRIT^B ^SSPELL_DAMAGE^B ^SSWING_MISSED^B ^SSPELL_MISSED^B ^SSWING_DAMAGE^B ^t^SEnabled^B ^t^t^SName^SOnStartTest ^SSettingsPerView^T ^Sbar^T ^SSizeX^F8318818918621499 ^f-46^t ^t^t^N61216^S`| ^Sgroup^N3 ^^</p>\r\n</blockquote> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/lsjyzjl\">lsjyzjl</a>","created_at":"2012-12-22T06:04:06Z"},{"body":" <p>I tested all the events today, some of them have a little strange issue but still work (such as On Spell Changed, it's not work in Cooldown icon but CLEU icon is ok). </p>\r\n<p>On Spell Changed (Cooldown icon) test string:</p>\r\n<blockquote><cite>Quote:</cite><p>^1^T^SType^Scooldown ^SSourceUnit^Splayer ^SName^S23922;`6343 ^SEvents^T ^N1^T ^SPassingCndt^B ^SType^SAnnouncements ^SCndtJustPassed^B ^SChannel^SEMOTE ^SLocation^S綜合 ^SText^S[Spell]Changed ^SEvent^SOnSpell ^t^N2^T ^SEvent^SOnShow ^t^Sn^N1 ^t^SSettingsPerView^T ^Sicon^T ^STexts^T ^N1^S ^t^t^Sbar^T ^STexts^T ^N1^S[Source] ^t^t^t^SEnabled^B ^SCLEUEvents^T ^SSPELL_DAMAGE_CRIT^B ^SSPELL_MISSED^B ^SSPELL_DAMAGE^B ^SSWING_MISSED^B ^SSWING_DAMAGE^B ^t^SShowTimerText^B ^t^N61216^S`| ^Sicon^^</p>\r\n</blockquote> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"12 22 2012 00:05:15 (CST) (UTC-6:00)\" data-epoch=\"1356156315\">Dec 22, 2012</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/lsjyzjl\">lsjyzjl</a>","created_at":"2012-12-22T06:04:38Z"},{"body":" <p>Found a bug where if you change an event handler from a type that has condition checking (like On Duration Changed) to an event that doesn't, the icon was still trying to check conditions for that event.</p>\r\n<p>This is definitely the cause of the OnStart bug, and I suspect that it may be the cause of the OnSpellChanged issue too.</p>\r\n<p>Comment #1 and OP were also fixed in r693</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"01 2 2013 16:46:02 (CST) (UTC-6:00)\" data-epoch=\"1357166762\">Jan 2, 2013</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-01-02T22:45:40Z"},{"body":" <p>Marking as fixed, let me know if something is still broken.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2013-01-02T22:47:33Z"}]}