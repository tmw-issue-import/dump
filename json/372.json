{"issue":{"title":"[CF 372] Scanning for buffs/debuffs on non-targeted units ","body":" <p>Would it be possible and feasible to scan the area close to the player for units with a designated buff or debuff? Example: As a protwarrior I use a talent called Blood and Thunder to spread Rend around. Whenever a bunch of mobs group up it can become hard to tell wether one among them still has Rend (maybe a mob leftover from the last trashpack). Could TmW perhaps use nameplate data to tell wether there's a unit in the vicinity with Rend? This feature doesn't have to be that reliable, since every time it works and I save a global reapplying Rend it's a plus already.</p> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/AmeroGer\">AmeroGer</a> | Imported from CurseForge issue <a href=\"https://wow.curseforge.com/projects/tellmewhen/issues/372\">#372</a> | <a href=\"https://github.com/tmw-issue-import/dump/blob/master/html/372.html\">Raw</a>","closed":true,"closed_at":"2011-12-10T23:08:14Z","created_at":"2011-12-06T20:02:40Z","updated_at":"2011-12-10T23:08:14Z","labels":["enhancement","resolved"]},"comments":[{"body":" <p>Nameplates can only obtain their data when you mouse over the unit, making the unitID <code>mouseover</code> available to check the unit, or if there is some other unitID available, such as <code>raid3target</code>. I don't see anything like that fitting into my goals for TMW, but you can do something that can make it easier to see if rend is on a group of mobs with a condition icon (you will probably want your Update Interval setting be set very low for this so that it catches every unit that you mouse over):</p>\r\n<p><code>^1^T^SType^Sconditionicon ^SShowWhen^Salways ^SConditions^T ^N1^T ^SType^SDEBUFFDUR ^SChecked^B ^SUnit^Smouseover ^SOperator^S&gt; ^SName^SRend ^SLevel^N0.3 ^t^Sn^N1 ^t^SConditionDur^N2 ^SOnlyIfCounting^B ^SName^S772 ^SEnabled^B ^SConditionDurEnabled^B ^t^N47020^S~`~| ^Sicon^^</code></p>\r\n<p>The icon will show for 2 seconds after you mouse over any unit that has more than 0.3 seconds of rend left. Note that there is a bug in r335, it should be fixed in r336</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2011-12-07T00:21:39Z"},{"body":" <p><cite>@<a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20372%5D+in%3Atitle\" rel=\"nofollow\">Cybeloras</a>: <a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20372%5D+in%3Atitle\" rel=\"nofollow\">Go</a></cite></p>\r\n<p>I'm tinkering with your suggestions right now. In the meanwhile, could you allow me to check all units at once with a condition? If so, what are the implications for performance here?</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/AmeroGer\">AmeroGer</a>","created_at":"2011-12-07T15:32:15Z"},{"body":" <p>The performance impact would be just about what it would be if you checked all the units in a buff/debuff icon. The problem, though, is that conditions were never designed to check more than one thing in a single condition. The GUI, the condition core, the buff/debuff condition core, and the buff/debuff conditions themselves would all need to be updated/rewritten in order to support that.</p>\r\n<p>Originally, there weren't any buff/debuff/cooldown/totem/etc conditions because I wanted people to check those things an an icon, and then use an icon shown condition to check the icon. This became too much of a hassle for really simple checks, though (for example, check if the cooldown of chimera shot is less than 5 seconds), so I instituted conditions that could check these things without needing a separate icon.</p>\r\n<p>For complex things (such as checking many units), it is still my current design philosophy that the best way to go about doing this is with an icon, and have it be referenced with an icon shown condition (or just use the icon doing the checking if that is sufficient) to do such things.</p>\r\n<p>Now, when you say \"all units\" do you mean something like \"raid1-40target, party1-5target; target\", or do you mean \"every unit that is visible and has a unitID\"? The former is possible by putting them in (although not exactly as I put it until r338), the latter is not, and will never be possible, as there is an infinite number of unitIDs if you append \"target\" a bunch of times to a unitID.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2011-12-07T23:26:33Z"},{"body":" <p><cite>@<a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20372%5D+in%3Atitle\" rel=\"nofollow\">Cybeloras</a>: <a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20372%5D+in%3Atitle\" rel=\"nofollow\">Go</a></cite></p>\r\n<blockquote><cite>Quote:</cite><p>Now, when you say \"all units\" do you mean something like \"raid1-40target, party1-5target; target\", or do you mean \"every unit that is visible and has a unitID\"?</p>\r\n</blockquote>\r\n<p>Yes, and I think that might've just answered my question. Though I am a little confused by your statement that it takes a unitID for nameplates to get data. I often Shockwave groups of mobs and I'm pretty sure I don't mouseover all of them, yet I get a Shockwave icon over their heads.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/AmeroGer\">AmeroGer</a>","created_at":"2011-12-08T03:29:54Z"},{"body":" <p>Nameplate addons are crafty little buggers, and they use a ton of different ways to determine whose nameplate is whose. One way is that when you mouseover a nameplate, the addon will cache the GUID and then match that with any combat log events (such as shockwave being applied to it). It will also try to match the exact name if there aren't multiple nameplates active with the same name, and so on.</p>\r\n<p>Blizzard support for nameplate addons is practically zero - the only data that can be obtained is extracting what is shown on the actual nameplate (health values, name, level, threat), and what can be obtained when you mouse over the unit.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2011-12-08T04:15:43Z"},{"body":" <p><cite>@<a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20372%5D+in%3Atitle\" rel=\"nofollow\">Cybeloras</a>: <a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20372%5D+in%3Atitle\" rel=\"nofollow\">Go</a></cite></p>\r\n<p>Pondering your idea from earlier with \"raid1-40target, party1-5target; target\". I also want to check if the unit is within Thunderclap range. However when I build two of these icons and combine them I have no guarantee that the unit that has Rend applied is the same unit that is within 8 yards.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/AmeroGer\">AmeroGer</a>","created_at":"2011-12-08T17:44:33Z"},{"body":" <p>I may allow conditions to check \"%u\" as a unit (which translates into whatever unit the main icon is currently checking). However, conditions are evaluated before the icon is checked and a unit is determined, so this could prove to be problematic. The worst case scenario right now is that it would take two icon updates to properly check conditions using %u.</p>\r\n<p>I will look into what I can do.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2011-12-08T23:58:17Z"},{"body":" <p>Added the ability to check %u in conditions in r338.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2011-12-09T01:52:43Z"},{"body":" <p><cite>@<a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20372%5D+in%3Atitle\" rel=\"nofollow\">Cybeloras</a>: <a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20372%5D+in%3Atitle\" rel=\"nofollow\">Go</a></cite></p>\r\n<p>It's not working. And I doubt it's due to my wrongdoing.</p>\r\n<p>^1^T^SBuffOrDebuff^SHARMFUL ^SUnit^Sraid1-40target;`party1-5target;`target;`focus ^SType^Sbuff ^SShowWhen^Sunalpha ^SConditions^T ^N1^T ^SType^SSPELLRANGE ^SUnit^S%u ^SName^SIntimidating`Shout ^t^Sn^N1 ^t^SName^SRend ^SEnabled^B ^t^N47023^S`| ^Sicon^^</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/AmeroGer\">AmeroGer</a>","created_at":"2011-12-09T15:41:14Z"},{"body":" <p>Just a note: I accidentally put party1-5target in my earlier post, but party5 does not exist; party only goes up to 4.</p>\r\n<p>You have the icon set to only show when rend is absent. If it is absent, the unit being checked defaults to the first unit that was entered into the editbox (i.e. raid1target). Therefore, the icon will only show when raid1target is in range of intimidating shout. You will probably have to invert the logic (show the icon when present, instead) to make this work. You may want to make a thunder clap cooldown icon, and set the rend icon as a condition. Maybe something fun like this:</p>\r\n<p><code>^1^T^SPoint^T ^Sy^F5118052363201153 ^f-46^Sx ^F-4553978258771139^f-45 ^Spoint^SRIGHT ^SrelativePoint^SRIGHT ^t^SEnabled^B ^SIcons^T ^N1^T ^SType^Smeta ^SEnabled^B ^SIcons^T ^N1^STellMeWhen_Group1_Icon2 ^N2^STellMeWhen_Group1_Icon3 ^t^t^N2^T ^SShowTimer^B ^SType^Scooldown ^SUnAlpha^N0.47 ^SConditions^T ^N1^T ^SType^SICON ^SIcon^STellMeWhen_Group1_Icon4 ^t^Sn^N1 ^t^SShowWhen^Salways ^SShowTimerText^B ^SFakeHidden^B ^SEnabled^B ^SName^SThunder~`Clap ^t^N3^T ^SType^Sconditionicon ^SConditions^T ^Sn^N1 ^t^SFakeHidden^B ^SEnabled^B ^SName^SRend ^t^N4^T ^SUnit^Sraid1-40target;~`party1-5target;~`target;~`focus ^SType^Sbuff ^SConditions^T ^N1^T ^SType^SSPELLRANGE ^SUnit^S%u ^SName^SRend ^t^Sn^N1 ^t^SBuffOrDebuff^SHARMFUL ^SFakeHidden^B ^SEnabled^B ^SName^SRend ^t^t^t^N47023^S~`~| ^Sgroup^N1 ^^</code></p>\r\n<p>Will show rend when it is not present on any of the checked units within range of intimidating shout, otherwise it will show a cooldown icon for thunderclap.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2011-12-10T22:23:04Z"},{"body":" <p><cite>@<a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20372%5D+in%3Atitle\" rel=\"nofollow\">Cybeloras</a>: <a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20372%5D+in%3Atitle\" rel=\"nofollow\">Go</a></cite></p>\r\n<p>Actually putting target in first place fixed the problem (apparently). I just didn't know the logic that was acting in the background. This is the finished icon:</p>\r\n<p>^1^T^SBuffOrDebuff^SHARMFUL ^SUnit^Starget;`focus;`party1-4target;`raid1-40target ^SOnlyMine^B ^SType^Sbuff ^SShowWhen^Sunalpha ^SConditions^T ^N1^T ^SType^SSPELLRANGE ^SUnit^S%u ^SName^SIntimidating`Shout ^t^Sn^N1 ^t^SName^SRend ^SFakeHidden^B ^SEnabled^B ^t^N47023^S`| ^Sicon^^</p>\r\n<p>It's fully intended that this is a rend icon. It is supposed to alert me to cast rend. Once that's done the thunderclap icon will emerge from a lower position within the metaicon and tell me that I'm now ready to cast thunderclap.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/AmeroGer\">AmeroGer</a>","created_at":"2011-12-10T23:04:02Z"},{"body":" <p>Ahhh, OK. Glad we could work something out!</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2011-12-10T23:08:07Z"}]}