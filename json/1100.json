{"issue":{"title":"[CF 1100] Icons Not Sorting Properly ","body":" <p>I think I reported this issue once before, but I don't remember.</p><p>The group should sort down to the first slots based on which are shown, but usually doesn't (not 100% consistent)</p><p><a href=\"http://pastebin.com/t1izySbH\" rel=\"nofollow\">http://pastebin.com/t1izySbH</a></p><p><a href=\"http://puu.sh/gugeZ/340b6100e0.jpg\" rel=\"nofollow\">http://puu.sh/gugeZ/340b6100e0.jpg</a><br><a href=\"http://puu.sh/gugbZ/72d12e81cf.jpg\" rel=\"nofollow\">http://puu.sh/gugbZ/72d12e81cf.jpg</a></p><p>First pic is the oddity, 2nd is what it should actually be sorted to. One thing to note, when I change my talents, it refreshes the group and sorts it properly, every time.</p> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a> | Imported from CurseForge issue <a href=\"https://wow.curseforge.com/projects/tellmewhen/issues/1100\">#1100</a> | <a href=\"https://github.com/tmw-issue-import/dump/blob/master/html/1100.html\">Raw</a>","closed":true,"closed_at":"2015-03-29T03:47:22Z","created_at":"2015-03-10T08:54:31Z","updated_at":"2015-03-29T03:47:22Z","labels":["defect","resolved"]},"comments":[{"body":" <p>How often, and under what circumstances, does this happen? Every time you enter arena? Or only sometimes? Or only when you enter the arena before your partner? Or only when you enter arena after your partner? etc.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"03 14 2015 01:27:50 (CST) (UTC-5:00)\" data-epoch=\"1426314470\">Mar 14, 2015</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2015-03-14T06:26:50Z"},{"body":" <p>It happens a lot with certain classes, DK and monk specifically. Doesn't happen ALL the time, but more often than not. Some classes rarely if ever bug (shamans). I'm pretty sure it's mostly when I enter first, but will keep a closer eye on it tomorrow.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-03-14T12:11:11Z"},{"body":" <p>Every time I've seen this happen, I'm the first one to zone in. Unsure if this is confirmation or what.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-03-20T03:41:29Z"},{"body":" <p>This is probably too early to say, and is probably just anecdotal, but I *think* this might have something to do with group conditions. Since I've removed the group condition for zone=arena, icons have sorted properly each time.</p>\r\n<p>It also fixed an issue I was gonna report with massive unit cooldown groups for Arena1/2/3 to track shit on the respective frame.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-03-28T01:06:07Z"},{"body":" <p>Try g2d0011d and see if it does anything.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2015-03-28T03:09:37Z"},{"body":" <p>Do you want me to add back the group conditions on that version?</p>\r\n<p>E: I don't see a new version labeled as that updated, should I be looking for an old version?</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"03 28 2015 00:45:12 (CST) (UTC-5:00)\" data-epoch=\"1427521512\">Mar 28, 2015</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-03-28T04:28:05Z"},{"body":" <p>Yeah, add the condition back. </p>\r\n<p>The packager seems to be very asleep.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2015-03-28T17:19:54Z"},{"body":" <p>Its awake now, and will be packaged as gaf595db.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2015-03-28T17:21:56Z"},{"body":" <p><a href=\"http://puu.sh/gTwIo/388302d10a.jpg\" rel=\"nofollow\">http://puu.sh/gTwIo/388302d10a.jpg</a></p>\r\n<p>First game in, looks the same as usual.</p>\r\n<p>E: So far it's been sorted properly every time I'm NOT the first person to zone into the arena.\r\nE2: Another thing I've noticed is that changing glyphs/talents seems to make the groups auto-update to the correct spot. I think I mentioned this before.\r\nE3: Once or twice it's bugged without me being first in, either not the correct spot (like OP's picture), or once it was sorted properly and then the 3rd icon was stacked vertically on the furthest left icon.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"03 28 2015 18:57:42 (CST) (UTC-5:00)\" data-epoch=\"1427587062\">Mar 28, 2015</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-03-28T21:33:08Z"},{"body":" <p>After enduring an hour and a half of skirmishes, during which I did manage to reproduce it twice on the two games where I was the first one in and actually got a partner that wasn't a warlock or druid or nobody, but didn't have enough debugging measures in place to really see what was going on, and after getting 5 minutes of craven for leaving too early, I decided to figure out a better way to reproduce it.</p>\r\n<p>I did (made one of the icons to track \"target\" as a unit, removed the group condition so I could test outside of arena, and then just targeted myself), and within a few minutes, I had figured it out.</p>\r\n<p>This may be the dumbest bug I have ever introduced into any software I've ever written. Here it is:</p>\r\n<div><div><div>\n\n```\nif attributes.dogTagUnit ~= dogTagUnit then\r\n\tdoFireIconUpdated = icon:SetInfo_INTERNAL(\"dogTagUnit\", dogTagUnit) or doFireIconUpdate\r\nend\r\n\n```\n</div></div>\r\n</div><p>Notice anything? \"doFireIconUpdate\" at the end of that line is missing a \"d\". Yup. </p>\r\n<p>TMW_ICON_UPDATED was never firing whenever the unit being checked on the icon ended up being the same before and after an update, even if other things on the icon changed, because of a single missing letter.</p>\r\n<p>That's why it didn't always happen - in the cases where the owner of some spell being tracked had a different unitID between games, or when you weren't the first one in so that TMW never had a chance to notice that they were temporarily not in your group during a loading screen, it would work. And, when you removed the condition from the group, their unitID was also changing as you entered and exited the arena, so that also caused their unitID to change, so that also caused it to still work. Or something. Anyway, there's an explanation for every case where it was seemingly random, and it all lies in that single missing letter.</p>\r\n<p>So that was fun. g32eb728.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2015-03-29T03:10:43Z"},{"body":" <p>Quality design structure by Cybeloras. I imagine this'll also solve the other issue I was talking about, but if not, I'll report it later.</p>\r\n<p>Thanks for the great work as always, sorry for making you do 90 minutes of skirms.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-03-29T03:35:14Z"}]}