{"issue":{"title":"[CF 1110] Icons Sometimes Not Appearing ","body":" <p><a href=\"http://wow.curseforge.com/addons/tellmewhen/files/1830-7-2-6-16-g54a0c0c/\" rel=\"nofollow\">http://wow.curseforge.com/addons/tellmewhen/files/1830-7-2-6-16-g54a0c0c/</a></p><p><a href=\"http://puu.sh/hi1HP/a50d4371d4.jpg\" rel=\"nofollow\">http://puu.sh/hi1HP/a50d4371d4.jpg</a><br><a href=\"http://pastebin.com/AM0tA9iq\" rel=\"nofollow\">http://pastebin.com/AM0tA9iq</a> Arena1 auras<br><a href=\"http://pastebin.com/TVGWBhgt\" rel=\"nofollow\">http://pastebin.com/TVGWBhgt</a> Arena2 auras<br><a href=\"http://pastebin.com/JQsNZFg8\" rel=\"nofollow\">http://pastebin.com/JQsNZFg8</a> Arena3 auras</p><p>This bug has been present for a while, only just now getting around to reporting it. It's very similar to the one I reported in <a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%201100%5D+in%3Atitle\" rel=\"nofollow\">http://wow.curseforge.com/addons/tellmewhen/tickets/1100-icons-not-sorting-properly/</a>, it is not 100% consistent, happens only sometimes, maybe &lt;10% of the time, if not less. Sometimes the auras will stay hidden for the entire arena game, sometimes they'll all appear midgame at once. Very inconsistent.</p><p>Can upload my whole aura setup if you want.</p><p>E: For reference, the auras should be appearing under the Gladius frames, such as <a href=\"http://puu.sh/hi1T6/1b18366eab.jpg\" rel=\"nofollow\">http://puu.sh/hi1T6/1b18366eab.jpg</a></p> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a> | Imported from CurseForge issue <a href=\"https://wow.curseforge.com/projects/tellmewhen/issues/1110\">#1110</a> | <a href=\"https://github.com/tmw-issue-import/dump/blob/master/html/1110.html\">Raw</a>","closed":true,"closed_at":"2015-04-27T03:34:17Z","created_at":"2015-04-18T09:43:39Z","updated_at":"2015-04-27T03:34:17Z","labels":["defect","resolved"]},"comments":[{"body":" <p>Make this a macro:</p>\r\n<div><div><div>\n\n```\n/run local g = TMW:GetDataOwner(\"TMW:group:1KfWA4IW3Fuj\") local c = g.ConditionObject print(c, c and c.Failed, g:IsShown(), g:IsVisible(), g:GetAlpha(), g:GetNumPoints()) for i = 1, g:GetNumPoints() do print(g, \"p\" .. i, g:GetPoint()) end\r\n\n```\n</div></div>\r\n</div><p>Next time this happens, click it, and take a screenshot of the output in chat. (that's the GUID for the arena1 group.)</p>\r\n<p>And one more thing - After it has happened once in a given session (consider a session to be started whenever you log in or manually reload your UI), does it happen again? And, does it always happen to all 3 groups at the same time, or can it happen to only one or two of them?</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"04 19 2015 02:07:33 (CDT) (UTC-5:00)\" data-epoch=\"1429427253\">Apr 19, 2015</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2015-04-19T07:03:07Z"},{"body":" <p>And one more thing - After it has happened once in a given session (consider a session to be started whenever you log in or manually reload your UI), does it happen again? And, does it always happen to all 3 groups at the same time, or can it happen to only one or two of them?</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"04 19 2015 02:07:50 (CDT) (UTC-5:00)\" data-epoch=\"1429427270\">Apr 19, 2015</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2015-04-19T07:06:56Z"},{"body":" <p>Will do w/the macro.</p>\r\n<p>It will happen again, but I can't honestly pin down a specific reason like w/the other ticket I made. Some games none of the 3 groups will apear, then they'll all appear next game. Sometimes only certain groups won't appear, or will appear midway through the game suddenly. I'll try to keep better track, though.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-04-19T21:35:59Z"},{"body":" <p><a href=\"http://puu.sh/hk1JP/97b5cf6a3d.jpg\" rel=\"nofollow\">http://puu.sh/hk1JP/97b5cf6a3d.jpg</a></p>\r\n<p>Note that a few seconds later the auras appeared, though.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"04 19 2015 19:51:11 (CDT) (UTC-5:00)\" data-epoch=\"1429491071\">Apr 19, 2015</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-04-19T23:02:43Z"},{"body":" <p>Does their appearance have any correlation to the first spell that each target casts in the arena (since you anchored to GladiusCastBar)? Just a thought - I haven't looked at Gladius's code to see if anything is weird there - the only thing I could think of would be the cast bar is, for some reason, anchored off the screen, which would be very strange indeed.</p>\r\n<p>Another diagnostic for you: next time it happens, do an /fstack and mouse over the area where the icons should be, and see if the group and its icons are indeed located in that spot (look for them in the tooltip - TellMeWhen_GlobalGroup10 for the first one).</p>\r\n<p>And a new macro (dont need the old one anymore):</p>\r\n<div><div><div>\n\n```\n/run g=TMW:GetDataOwner(\"TMW:group:1KfWA4IW3Fuj\")s=\"\"print(g, UnitClass(\"arena1\"))for ic in g:InIcons()do a=ic.attributes s=s..ic.ID..\";\"..a.alpha..\";\"..a.realAlpha..\";\"..(a.conditionFailed and 1 or 0)..\";\"..(a.shown and 1 or 0)..\"  \"end print(s)\r\n\n```\n</div></div>\r\n</div> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"04 20 2015 00:49:43 (CDT) (UTC-5:00)\" data-epoch=\"1429508983\">Apr 20, 2015</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2015-04-20T05:39:09Z"},{"body":" <p>Maybe, but I doubt it since it happens on casters and not just melee.</p>\r\n<p>I'll do that next time I see it.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-04-20T05:43:03Z"},{"body":" <p>Edited my comment with a new macro.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2015-04-20T05:50:24Z"},{"body":" <p><a href=\"http://puu.sh/hkhDL/4b77686203.jpg\" rel=\"nofollow\">http://puu.sh/hkhDL/4b77686203.jpg</a></p>\r\n<p>Just happened. </p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-04-20T06:24:59Z"},{"body":" <p><del>New one, because something very strange happened there (most of the output is missing, would would seem to indicate that the group doesn't have any icons...):</del></p>\r\n<p>Don't use this one, use the one above. Sorry.</p>\r\n<div><div><div>\n\n```\n/run g=TMW:GetDataOwner(\"TMW:group:1KfWA4IW3Fuj\")s=\"d\"print(g,UnitClass(\"arena1\"),g[1],#g)for ic in g:InIcons()do a=ic.attributes s=s..ic.ID..\";\"..a.alpha..\";\"..a.realAlpha..\";\"..(a.conditionFailed and 1 or 0)..\";\"..(a.shown and 1 or 0)..\"  \"end print(s)\r\n\n```\n</div></div>\r\n</div> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"04 20 2015 01:37:36 (CDT) (UTC-5:00)\" data-epoch=\"1429511856\">Apr 20, 2015</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2015-04-20T06:32:58Z"},{"body":" <p>Better new one, I figured out the issue with it:</p>\r\n<div><div><div>\n\n```\n/run g=TMW:GetDataOwner(\"TMW:group:1KfWA4IW3Fuj\")s=\"\"print(g, UnitClass(\"arena1\"))for ic in g:InIcons()do a=ic.attributes s=s..ic.ID..\";\"..(a.alpha or\"\")..\";\"..a.realAlpha..\";\"..(a.conditionFailed and 1 or 0)..\";\"..(a.shown and 1 or 0)..\"  \"end print(s)\r\n\n```\n</div></div>\r\n</div> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2015-04-20T06:37:07Z"},{"body":" <p>Will try when I see it next. Forgot about the /fstack thing, I'll try to get that too. Sorry can't always afford to check that in the middle of a game lol.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-04-20T06:49:26Z"},{"body":" <p>Ferals don't have any auras that'd instantly show now that I think about it, so nix this.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"04 22 2015 23:00:51 (CDT) (UTC-5:00)\" data-epoch=\"1429761651\">Apr 22, 2015</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-04-23T03:44:32Z"},{"body":" <p>Was that druid stealthed when you took this? Because even without him having things that should show immediately, there is something weird going on here - all the icons are hidden, which would imply that the conditions of the group aren't passing. But, if the conditions of the group ARE actually passing (I couldn't fit that output in the macro), then something very, very bad is happening, because those icons shouldn't be hidden unless the group's conditions are failing (icon conditions set alpha to 0 - they don't hide an icon outright).</p>\r\n<p>I'm not 100% sure, but I think that a Unit Exists check should fail on an arena enemy unit that is stealthed/invisible, which is why I ask if it was stealthed. From the debug data, your druid icons have passing conditions since spec data is available at that time.</p>\r\n<p>TL;DR: If the druid was stealthed when you took this, everything is fine with this particular output, but if he wasn't, that's bad.</p>\r\n<p>(<a href=\"http://puu.sh/hnDTy/7547be5d12.jpg\" rel=\"nofollow\">http://puu.sh/hnDTy/7547be5d12.jpg</a>)</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2015-04-23T19:27:11Z"},{"body":" <p><a href=\"http://puu.sh/homDn/e5cda323f5.jpg\" rel=\"nofollow\">http://puu.sh/homDn/e5cda323f5.jpg</a></p>\r\n<p>Rogue was unstealthed at this point I believe, but obviously he starts the game stealthed. Icons of stealthed units are USUALLY picked up immediately after leaving it, so if they stay hidden it's an issue.</p>\r\n<p>In that particular case, the druid was NOT stealthed (though offhand I'm unsure if he used any ability that would have triggered an aura, he probably did use at least bash I'm sure, though).</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-04-23T19:59:10Z"},{"body":" <p><a href=\"http://puu.sh/hptBN/ed12ea2758.jpg\" rel=\"nofollow\">http://puu.sh/hptBN/ed12ea2758.jpg</a></p>\r\n<p>Arena2 only wasn't showing icons. I dunno if this shows you anything if it's not arena1 though.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-04-24T19:40:21Z"},{"body":" <p><a href=\"http://puu.sh/hpIxY/995312c366.jpg\" rel=\"nofollow\">http://puu.sh/hpIxY/995312c366.jpg</a></p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-04-24T23:40:35Z"},{"body":" <p><a href=\"http://puu.sh/hpShl/03198ec167.jpg\" rel=\"nofollow\">http://puu.sh/hpShl/03198ec167.jpg</a></p>\r\n<p>I noticed in the full screenshto the auras are shown, but at the time I took it I'm pretty sure they won't showing.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-04-25T03:07:18Z"},{"body":" <p><a href=\"http://puu.sh/hpYjy/b177383a91.jpg\" rel=\"nofollow\">http://puu.sh/hpYjy/b177383a91.jpg</a></p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-04-25T05:17:19Z"},{"body":" <p><a href=\"http://puu.sh/hqIdY/8cfa71cd5e.jpg\" rel=\"nofollow\">http://puu.sh/hqIdY/8cfa71cd5e.jpg</a>\r\n<a href=\"http://puu.sh/hqIfH/501b1ce6d7.jpg\" rel=\"nofollow\">http://puu.sh/hqIfH/501b1ce6d7.jpg</a></p>\r\n<p>Both screenshots are of the same team, different games. I'll try to remember to test the /fstack thing again.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2015-04-25T21:46:12Z"},{"body":" <p>Thanks for all the info. It was an issue with the Unit Specialization condition not working on players from your own server. I have no idea why it would intermittently start working. Perhaps there are two bugs here...</p>\r\n<p>gf51c947.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2015-04-27T03:33:15Z"}]}