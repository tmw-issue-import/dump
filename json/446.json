{"issue":{"title":"[CF 446] Multi-state icon - strange behavior in LFR ","body":" <p>What steps will reproduce the problem?<br>1. Create multi-state icon for Holy Word: Chastise with Show Timer Text and Show Always enabled;<br>2. Set it to grayscale when on CD;<br>3. Join LFR raid and cast timed heal such as Prayer of Healing or Flash Heal.</p><p>What do you expect to happen? What happens instead?<br>Expect icon to behave like Spell Cooldown icon and remain colored when off CD regardless of casts.</p><p>What version of TellMeWhen are you using? (\"The latest\" is not a version)<br>4.8.3</p><p>Do you have an error log of what happened?<br>Not sure if related but here is one captured by BugSack:</p><p>2x TellMeWhen\\TellMeWhen-4.8.3.lua:1391: attempt to index local \"t\" (a number value)<br>TellMeWhen\\TellMeWhen-4.8.3.lua:1391: in function \"icon\"<br>TellMeWhen\\TellMeWhen-4.8.3.lua:1400: in function \"?\"<br>Libs\\CallbackHandler-1.0\\CallbackHandler-1.0-6.lua:147: in function &lt;Libs\\CallbackHandler-1.0\\CallbackHandler-1.0.lua:147&gt;<br>&lt;string&gt;:\"safecall Dispatcher[2]\":4: in function &lt;string&gt;:\"safecall Dispatcher[2]\":4<br>&lt;in C code&gt;<br>&lt;string&gt;:\"safecall Dispatcher[2]\":13: in function \"?\"<br>Libs\\CallbackHandler-1.0\\CallbackHandler-1.0-6.lua:92: in function \"Fire\"<br>Libs\\AceDB-3.0\\AceDB-3.0-22.lua:358: in function &lt;Libs\\AceDB-3.0\\AceDB-3.0.lua:355&gt;<br>Locals:<br>nil</p><p>Please provide any additional information below (including any export strings if applicable; see above.)<br>I left Main options on default which includes enabled \"Timers ignore GCD\" but it seems like it's possibly GCD related. My Spell Cooldown icons behave as expected and remain colored regardless of timed casts and stay grayscale while on CD. I haven't tested any other. Please see screenshots of normal behavior as solo and random dungeon vs LFR.</p> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Orego\">Orego</a> | Imported from CurseForge issue <a href=\"https://wow.curseforge.com/projects/tellmewhen/issues/446\">#446</a> | <a href=\"https://github.com/tmw-issue-import/dump/blob/master/html/446.html\">Raw</a>","closed":true,"closed_at":"2012-08-26T11:29:31Z","created_at":"2012-02-24T06:11:37Z","updated_at":"2012-08-26T11:29:31Z","labels":["defect","declined"]},"comments":[{"body":"<strong>Attachment Added:</strong><a href=\"https://media.forgecdn.net/attachments/76/241/tmw_lfr.png\" target=\"_blank\"> tmw_lfr.png</a><br> <a class=\"e-avatar128 lightbox\" href=\"https://media.forgecdn.net/attachments/76/241/tmw_lfr.png\" title=\"tmw_lfr.png\"> <img src=\"https://media.forgecdn.net/attachments/thumbnails/76/241/126/126/tmw_lfr.png\"> </a> <div class=\"attachment-desc\"> <h4 class=\"attachment-title\">tmw_lfr.png</h4> <p>&lt;p&gt;TMW in LFR&lt;/p&gt;</p> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Orego\">Orego</a>","created_at":"2012-02-24T06:11:37Z"},{"body":"<strong>Attachment Added:</strong><a href=\"https://media.forgecdn.net/attachments/76/242/tmw_solo.png\" target=\"_blank\"> tmw_solo.png</a><br> <a class=\"e-avatar128 lightbox\" href=\"https://media.forgecdn.net/attachments/76/242/tmw_solo.png\" title=\"tmw_solo.png\"> <img src=\"https://media.forgecdn.net/attachments/thumbnails/76/242/126/126/tmw_solo.png\"> </a> <div class=\"attachment-desc\"> <h4 class=\"attachment-title\">tmw_solo.png</h4> <p>&lt;p&gt;TMW Solo&lt;/p&gt;</p> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Orego\">Orego</a>","created_at":"2012-02-24T06:11:37Z"},{"body":"<strong>Attachment Added:</strong><a href=\"https://media.forgecdn.net/attachments/76/243/tmw_party.png\" target=\"_blank\"> tmw_party.png</a><br> <a class=\"e-avatar128 lightbox\" href=\"https://media.forgecdn.net/attachments/76/243/tmw_party.png\" title=\"tmw_party.png\"> <img src=\"https://media.forgecdn.net/attachments/thumbnails/76/243/126/126/tmw_party.png\"> </a> <div class=\"attachment-desc\"> <h4 class=\"attachment-title\">tmw_party.png</h4> <p>&lt;p&gt;TMW in Random Dungeon&lt;/p&gt;</p> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Orego\">Orego</a>","created_at":"2012-02-24T06:11:37Z"},{"body":" <p>Please don't ignore the instructions at the top of the ticket template. You need to post the export string of the icon in question for me to be able to properly troubleshoot the issue.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2012-02-24T06:20:47Z"},{"body":" <p>Here is the export string:</p>\r\n<p>^1^T^SShowWhen^Salways ^SType^Smultistate ^SName^SHoly`Word:`Chastise ^SEnabled^B ^SShowTimerText^B ^t^N50035^S`| ^Sicon^^</p>\r\n<p>Also, tested with all other add-ons disabled in LFR with the same outcome.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"02 24 2012 00:49:00 (CST) (UTC-6:00)\" data-epoch=\"1330066140\">Feb 24, 2012</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Orego\">Orego</a>","created_at":"2012-02-24T06:26:57Z"},{"body":" <p>Alright, thanks. I will take a look at this tomorrow - I'm dead tired right now.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2012-02-24T06:30:01Z"},{"body":" <p>I can't reproduce this on my shaman just using a normal spell instead of one that actually has multiple states ( shaman because I wanted a quick LFR queue as a healer.) , and I don't have a priest. Can't do it on the PTR because my priest on there doesn't have enough gear and premades aren't open, plus I don't even know if LFR works on the PTR right now. Don't have an 85 DK either, which would be the next closest to a priest (Dark Simulacrum).</p>\r\n<p>This whole issue is extremely bizarre (oh, and that error is almost certainly unrelated. Is it still occurring after you downloaded 5.0.0?). I really don't know what might be causing it, but something tells me that it is on Blizzard's end. Does the problem also occur in a regular raid? Or only in LFR? Does it happen when HW: C is in its default state (no Chakra)? Does it occur if you disable \"Timers ignore GCD\"? And just to be sure, it is only gray while you are casting, and it turns back to normal once you finish casting, correct?</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2012-02-25T04:52:33Z"},{"body":" <p><cite>@<a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20446%5D+in%3Atitle\" rel=\"nofollow\">Cybeloras</a>: <a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20446%5D+in%3Atitle\" rel=\"nofollow\">Go</a></cite></p>\r\n<p>I've tried with 5.0.0 and the same issue. I'm going to test non-LFR raid hopefully tomorrow and let you know but it would be 10 man raid. It occurs in combat in any state including default HW: C, and when \"Timers ignore GCD\" is disabled. And yes, it turns to grey for the duration of GCD while casting then back to normal. Just a thought, but could it have anything to do with multiple holy priests in the same raid?</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"02 25 2012 20:48:07 (CST) (UTC-6:00)\" data-epoch=\"1330224487\">Feb 25, 2012</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Orego\">Orego</a>","created_at":"2012-02-26T02:41:29Z"},{"body":" <p>Probably not. Multi-state cooldown icons get their information directly from your action bars - that is why actions have to be on your action bars - there is special information there not available to normal cooldown tracking methods.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2012-02-26T03:39:59Z"},{"body":" <p>Is this issue still occurring?</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2012-03-11T02:20:47Z"},{"body":" <p><cite>@<a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20446%5D+in%3Atitle\" rel=\"nofollow\">Cybeloras</a>: <a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20446%5D+in%3Atitle\" rel=\"nofollow\">Go</a></cite></p>\r\n<p>Unfortunately, yes. I tried different things like removing grayscale from global colors and adding under Multi-state icon colors with no success.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Orego\">Orego</a>","created_at":"2012-03-11T17:34:19Z"},{"body":" <p>Have you had a chance to test it in a regular raid? Does it occur there? Or only in LFR?</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2012-03-11T17:58:34Z"},{"body":" <p><cite>@<a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20446%5D+in%3Atitle\" rel=\"nofollow\">Cybeloras</a>: <a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20446%5D+in%3Atitle\" rel=\"nofollow\">Go</a></cite></p>\r\n<p>Actually, I did get to test this in regular 10 man DS raid yesterday with my guild and the same behavior was occurring so this is not LFR specific. I was the only holy priest in the raid.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"03 12 2012 08:28:47 (CST) (UTC-5:00)\" data-epoch=\"1331558927\">Mar 12, 2012</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Orego\">Orego</a>","created_at":"2012-03-12T13:28:24Z"},{"body":" <p>I really have no idea why this is occuring, nor do I know how to go about debugging it since I can't reproduce it because I don't have a priest. Perhaps the opportunity will present itself once the MoP beta realms go up, but for now, I'm just going to have to let this one set until I think of anything else.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2012-03-13T22:54:39Z"},{"body":" <p><cite>@<a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20446%5D+in%3Atitle\" rel=\"nofollow\">Cybeloras</a>: <a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20446%5D+in%3Atitle\" rel=\"nofollow\">Go</a></cite></p>\r\n<p>I've reverted to TMW 4.7.3 for testing purposes to see if the same issue occurs. I'll keep you posted.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Orego\">Orego</a>","created_at":"2012-03-15T15:06:43Z"},{"body":" <p><cite>@<a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20446%5D+in%3Atitle\" rel=\"nofollow\">Cybeloras</a>: <a href=\"https://github.com/tmw-issue-import/TellMeWhen/issues?q=%5BCF%20446%5D+in%3Atitle\" rel=\"nofollow\">Go</a></cite></p>\r\n<p>The same issue occurs with TMW 4.7.3 :(. It's definitely triggered by GCD and can be seen by turning timer on (sweeping animation). Since my action bar shows GCD, perhaps somehow, it gets bugged in raid and starts to show GCD as cooldown and there is no timer text because OmniCC functions as intended. OmniCC profile for TMW is set to show milliseconds below 1. </p>\r\n<p>It occurs in every state of Chakra including default, but for some weird reason only in raid group.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Orego\">Orego</a>","created_at":"2012-03-16T07:09:34Z"},{"body":" <p>Any luck with the issue in 5.1.0?</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"05 2 2012 23:24:55 (CST) (UTC-5:00)\" data-epoch=\"1336019095\">May 2, 2012</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2012-05-03T04:24:55Z"},{"body":" <p>No response from OP after 3 months. Closing ticket.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2012-08-26T11:29:04Z"}]}