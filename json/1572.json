{"issue":{"title":"[CF 1572] LUA Error ","body":" <p>8.5.3-1-g8049e99c-alpha</p>\r\n<p>&nbsp;</p>\r\n<p>39x [string \"safecall Dispatcher[1]\"]:9: script ran too long<br>[string \"safecall Dispatcher[1]\"]:9: in function &lt;[string \"safecall Dispatcher[1]\"]:5&gt;<br>(tail call): ?<br>TellMeWhen\\TellMeWhen-8.5.3.lua:2669: in function `UpdateNormally'<br>TellMeWhen\\TellMeWhen-8.5.3.lua:2790: in function `Update'<br>TellMeWhen\\TellMeWhen-8.5.3.lua:2798: in function `?'<br>ElvUI\\Libraries\\AceTimer-3.0\\AceTimer-3.0-17.lua:55: in function &lt;ElvUI\\Libraries\\AceTimer-3.0\\AceTimer-3.0.lua:50&gt;</p>\r\n<p>Locals:<br>func = &lt;function&gt; defined @TellMeWhen\\Components\\Core\\Group.lua:424<br>(*temporary) = true<br>(*temporary) = \"script ran too long\"<br>method = &lt;function&gt; defined @TellMeWhen\\Components\\IconModules\\IconModule_IconContainer\\IconContainer.lua:35<br>arg1 = &lt;table&gt; {<br> lmbGroup = &lt;table&gt; {<br> }<br> IsImplemented = true<br> IsEnabled = true<br> implementationData = &lt;table&gt; {<br> }<br> hasSkinned = true<br> icon = TellMeWhen_GlobalGroup24_Icon1 {<br> }<br> container = TellMeWhen_GlobalGroup24_Icon1IconModule_IconContainer_MasqueIconContainer {<br> }<br>}<br>xpcall = &lt;function&gt; defined =[C]:-1<br>call = &lt;function&gt; defined safecall Dispatcher[1]:3<br>eh = &lt;function&gt; defined @TellMeWhen\\TellMeWhen.lua:459</p>\r\n<p>&nbsp;</p>\r\n<p>Might have something to do with my the [Stacks] tag in my RB icon keeps saying 0 stacks when I know that's not the case? Also see references to Masque or Elv so this might not even be related to TMW in the end.</p> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a> | Imported from CurseForge issue <a href=\"https://wow.curseforge.com/projects/tellmewhen/issues/1572\">#1572</a> | <a href=\"https://github.com/tmw-issue-import/dump/blob/master/html/1572.html\">Raw</a>","closed":true,"closed_at":"2018-10-22T01:47:28Z","created_at":"2018-09-03T00:55:32Z","updated_at":"2018-11-16T20:57:00Z","labels":["defect","resolved"]},"comments":[{"body":" <p>8.5.3</p>\r\n<p>&nbsp;</p>\r\n<p>1x [string \"safecall Dispatcher[1]\"]:9: script ran too long<br>[string \"safecall Dispatcher[1]\"]:9: in function &lt;[string \"safecall Dispatcher[1]\"]:5&gt;<br>(tail call): ?<br>TellMeWhen\\TellMeWhen-8.5.3.lua:2669: in function `UpdateNormally'<br>TellMeWhen\\TellMeWhen-8.5.3.lua:2790: in function `Update'<br>TellMeWhen\\TellMeWhen-8.5.3.lua:2798: in function `?'<br>ElvUI\\Libraries\\AceTimer-3.0\\AceTimer-3.0-17.lua:55: in function &lt;ElvUI\\Libraries\\AceTimer-3.0\\AceTimer-3.0.lua:50&gt;</p>\r\n<p>Locals:<br>func = &lt;function&gt; defined @TellMeWhen\\Components\\Core\\Group.lua:424<br>(*temporary) = true<br>(*temporary) = \"script ran too long\"<br>method = &lt;function&gt; defined @TellMeWhen\\Components\\Core\\Icon.lua:810<br>arg1 = TellMeWhen_GlobalGroup19_Icon33 {<br> GUID = \"\"<br> LastUpdate = 0<br> ComponentsLookup = &lt;table&gt; {<br> }<br> Update_Method = \"auto\"<br> EventHandlersSet = &lt;table&gt; {<br> }<br> attributes = &lt;table&gt; {<br> }<br> ID = 33<br> 0 = &lt;userdata&gt;<br> Name = \"\"<br> typeData = &lt;table&gt; {<br> }<br> Enabled = false<br> Type = \"\"<br> NextUpdateTime = 0<br> TempGUID = \"TMW:icon:1RZ8SG4sFDec\"<br> group = TellMeWhen_GlobalGroup19 {<br> }<br> Modules = &lt;table&gt; {<br> }<br> position = &lt;table&gt; {<br> }<br> normaltex = &lt;unnamed&gt; {<br> }<br> lmbButtonData = &lt;table&gt; {<br> }<br> Components = &lt;table&gt; {<br> }<br> Events = &lt;table&gt; {<br> }<br> SettingsPerView = &lt;table&gt; {<br> }<br> viewData = &lt;table&gt; {<br> }<br> Conditions = &lt;table&gt; {<br> }<br> UnitConditions = &lt;table&gt; {<br> }<br> States = &lt;table&gt; {<br> }<br>}<br>xpcall = &lt;function&gt; defined =[C]:-1<br>call = &lt;function&gt; defined safecall Dispatcher[1]:3<br>eh = &lt;function&gt; defined @TellMeWhen\\TellMeWhen.lua:459</p>\r\n<p>&nbsp;</p>\r\n<p>So it's not just the alpha version.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2018-09-03T01:13:20Z"},{"body":" <p>Where were you when these errors happened? Were you in combat? Out of combat? What zone?</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 9 2018 14:29:02 (CST) (UTC-5:00)\" data-epoch=\"1536521342\">Sep 9, 2018</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2018-09-09T19:28:34Z"},{"body":" <p>In arena I believe, so in combat. I do believe it also happens in combat, but out of arena. Don't think it happens out of combat entirely. Will keep track from now on.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2018-09-10T01:21:16Z"},{"body":" <p>Its just really strange to me. I can no longer get \"script ran too long\" to trigger for me whatsoever no matter what I do.</p>\r\n<p>&nbsp;</p>\r\n<p>It used to be that when any addon ran code for longer than 200ms while in combat, execution would be terminated with that error. TMW tries to limit each update to an absolute max of 50ms (which is still crazy high, but it helps prevent the errors in weird situations where there might be a random spike).</p>\r\n<p>&nbsp;</p>\r\n<p>Even if I run some loop that takes 5 seconds to execute while in combat (I even tried specifically while in arena, and while engaged with a raid boss), the error doesn't happen - it just freezes my game for 5 seconds.</p>\r\n<p>&nbsp;</p>\r\n<p>Its curious in your case because the stack traces you posted are showing that at the time you got these errors, InCombatLockdown() returned false. See <a href=\"https://github.com/ascott18/TellMeWhen/blob/master/TellMeWhen.lua#L2790\" rel=\"nofollow\">https://github.com/ascott18/TellMeWhen/blob/master/TellMeWhen.lua#L2790</a>. This suggests that you somehow got these errors while NOT in combat, which is extra bizarre because Blizzard's time limits have NEVER applied while not in combat.</p>\r\n<p>&nbsp;</p>\r\n<p>When this does happen to you again, could you post the error and then be sure to clear out BugSack (I assume you're using BugSack) - it does some wonky things with the way it groups error messages that causes some detail to be lost unless you clear it out.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2018-09-10T04:46:20Z"},{"body":" <p><a href=\"https://pastebin.com/kHjAStnB\" rel=\"nofollow\">https://pastebin.com/kHjAStnB</a></p>\r\n<p>&nbsp;</p>\r\n<p>1) I was out of combat and had 0 bugs in my Bugsack&nbsp;</p>\r\n<p>2) I tested out what would happen if I hit a target dummy in Zuldazar, no errors</p>\r\n<p>3) I queued for an Arena Skirmish</p>\r\n<p>4) Accepted the queue out of combat</p>\r\n<p>5) Upon entering the arena, I received the above bug (Raging Blow icon still reported 2 stacks)&nbsp;</p>\r\n<p>6) Upon entering combat, my stacks immediately dropped to 0 after using a single charge, and the icon would not correct itself even if I had &gt;0 charges.</p>\r\n<p>&nbsp;</p>\r\n<p>Doesn't seem to happen in every arena, as it the error corrected itself as I left the arena and didn't happen on the next skirmish queue. And FWIW the above skirmish happened in Ruins of Lordaeron.</p>\r\n<p>&nbsp;</p>\r\n<p>Also worth noting this was on the latest alpha version -&nbsp;8.5.4-1-ge91a75f4-alpha</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"09 10 2018 01:33:46 (CST) (UTC-5:00)\" data-epoch=\"1536561226\">Sep 10, 2018</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2018-09-10T06:27:44Z"},{"body":" <p><a href=\"https://pastebin.com/Hfr7bDMU\" rel=\"nofollow\">https://pastebin.com/Hfr7bDMU</a></p>\r\n<p>&nbsp;</p>\r\n<p>Another one, also in Ruins of Loraeron. I queued at least 5 games between this on varying maps with no error - it's possible this error is intrinsically linked with that specific map.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2018-09-10T06:54:40Z"},{"body":" <p><a href=\"https://pastebin.com/Ku980Lmq\" rel=\"nofollow\">https://pastebin.com/Ku980Lmq</a></p>\r\n<p>&nbsp;</p>\r\n<p>This is the export info for the icon that gets buggy when this error happens as well.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2018-09-10T18:21:01Z"},{"body":" <p>Is there any extra information you need for this?</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2018-10-03T06:30:33Z"},{"body":" <p>Did the error happen *after* you were loaded into the arena, or was the error already there when the loading screen finished (i.e. it happened during the loading screen, not after it)?</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"10 7 2018 14:27:36 (CST) (UTC-5:00)\" data-epoch=\"1538940456\">Oct 7, 2018</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2018-10-07T19:07:44Z"},{"body":" <p>Try g6bc49450 and see if that does anything to fix the issue. It was just a shot in the dark, so I'm not sure if it will or not.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2018-10-07T19:37:26Z"},{"body":" <p>I honestly have no way of telling if it happened in the loading screen or after, that I'm aware of? How would I know?</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2018-10-07T22:09:49Z"},{"body":" <p>This&nbsp;<em>seems</em> to fix it. I'll update if something changes.&nbsp;</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2018-10-07T22:32:37Z"},{"body":" <p>Just wondering if the error message is already there right when the loading screen is done, or if its happening at some point after that when you're able to move your character, cast spells, etc.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2018-10-08T05:13:19Z"},{"body":" <p>The former, then. It's in my bugsack the second I load in.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2018-10-08T05:20:32Z"},{"body":" <p>For me this issue was with empty TMW frame with inside conditions when frame wasn't even enabled or anyhow selected as icon type.&nbsp;</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/cordankos\">cordankos</a>","created_at":"2018-10-21T21:44:37Z"},{"body":" <p>cordankos: ...what?</p>\r\n<p>&nbsp;</p>\r\n<p>Jaloppy: assuming this is fixed consistently for you now. Open a new issue if it keeps happening.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2018-10-22T01:47:28Z"},{"body":" <p>&nbsp;i have very similar error when i enter arena. is there a way to fix it? </p>\r\n<p>&nbsp;</p>\r\n<p>1x [string \"safecall Dispatcher[1]\"]:9: script ran too long<br>[string \"safecall Dispatcher[1]\"]:9: in function &lt;[string \"safecall Dispatcher[1]\"]:5&gt;<br>(tail call): ?<br>TellMeWhen\\TellMeWhen-8.5.4.lua:2658: in function `UpdateNormally'<br>TellMeWhen\\TellMeWhen-8.5.4.lua:2790: in function `Update'<br>TellMeWhen\\TellMeWhen-8.5.4.lua:2798: in function `?'<br>ElvUI\\Libraries\\AceTimer-3.0\\AceTimer-3.0-17.lua:55: in function &lt;ElvUI\\Libraries\\AceTimer-3.0\\AceTimer-3.0.lua:50&gt;</p>\r\n<p>Locals:<br>func = &lt;function&gt; defined @TellMeWhen\\Components\\Core\\Group.lua:424<br>(*temporary) = true<br>(*temporary) = \"script ran too long\"<br>method = &lt;function&gt; defined @TellMeWhen\\Components\\Core\\Icon.lua:810<br>arg1 = TellMeWhen_Group27_Icon40 {<br> 0 = &lt;userdata&gt;<br> LastUpdate = 0<br> ComponentsLookup = &lt;table&gt; {<br> }<br> Update_Method = \"auto\"<br> EventHandlersSet = &lt;table&gt; {<br> }<br> Modules = &lt;table&gt; {<br> }<br> attributes = &lt;table&gt; {<br> }<br> ID = 40<br> GUID = \"\"<br> position = &lt;table&gt; {<br> }<br> Enabled = false<br> Type = \"\"<br> NextUpdateTime = 0<br> TempGUID = \"TMW:icon:1Rxi5T3w0BBb\"<br> Name = \"\"<br> group = TellMeWhen_Group27 {<br> }<br> typeData = &lt;table&gt; {<br> }<br> lmbButtonData = &lt;table&gt; {<br> }<br> Components = &lt;table&gt; {<br> }<br> Events = &lt;table&gt; {<br> }<br> SettingsPerView = &lt;table&gt; {<br> }<br> viewData = &lt;table&gt; {<br> }<br> Conditions = &lt;table&gt; {<br> }<br> UnitConditions = &lt;table&gt; {<br> }<br> States = &lt;table&gt; {<br> }<br>}<br>xpcall = &lt;function&gt; defined =[C]:-1<br>call = &lt;function&gt; defined safecall Dispatcher[1]:3<br>eh = &lt;function&gt; defined @TellMeWhen\\TellMeWhen.lua:459</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/sensorhs\">sensorhs</a>","created_at":"2018-11-16T13:29:40Z"},{"body":" <p>Get the latest alpha version.</p>\r\n<p>&nbsp;</p>\r\n<p><a href=\"https://wow.curseforge.com/projects/tellmewhen/files/2638522\" rel=\"nofollow\">https://wow.curseforge.com/projects/tellmewhen/files/2638522</a></p>\r\n<p>&nbsp;</p>\r\n<p>If this doesn't fix it, then make a new ticket because it is likely a new error entirely.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Jalopyy\">Jalopyy</a>","created_at":"2018-11-16T20:57:00Z"}]}