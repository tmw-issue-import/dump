{"issue":{"title":"[CF 1410] TMW's use of clearallpoints() ","body":" <p>I have been having odd lua errors randomly that were the result of addon tainting. The error would always be along the lines of</p>\r\n<p>&nbsp;</p>\r\n<p>&lt;addon&gt; tried to call the protected function '&lt;unnamed&gt;:ClearAllPoints()'</p>\r\n<p>&nbsp;</p>\r\n<p>It lead me to scan all content within my addons I am using. the only addon I found that uses the call ClearAllPoints() is TellMeWhen. While it is entirely possible that Blizzard has created an unstable function with their world map changes I wanted to bring up that I do have a concern about the use of clearing points in tellmewhen ad how it can and often clears while in combat.</p>\r\n<p>&nbsp;</p>\r\n<p>Locations where ClearAllPoints is used</p>\r\n<p>&nbsp;</p>\r\n<p>TellMeWhen.xml line 36 and 37</p>\r\n<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; self.borderTop:ClearAllPoints()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.borderBottom:ClearAllPoints()</p>\r\n<p>&nbsp;</p>\r\n<p>GroupConfig.xml line 262</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self:ClearAllPoints()</p>\r\n<p>&nbsp;433</p>\r\n<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; GroupSelect:ClearAllPoints()</p>\r\n<p>&nbsp;</p>\r\n<p>Components\\IconModules\\IconModule_TimerBar_OverlayConfig.xml line 45</p>\r\n<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; self.text:ClearAllPoints()</p>\r\n<p>&nbsp;</p>\r\n<p>IconModules\\IconModule_TimerBar_BarDisplay\\Config.xml line 28</p>\r\n<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; self.text:ClearAllPoints()</p>\r\n<p>&nbsp;</p>\r\n<p>Components\\IconModules\\IconModule_PowerBar_Overlay\\Config.xml line 44</p>\r\n<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; self.text:ClearAllPoints()</p>\r\n<p>&nbsp;</p>\r\n<p>Components\\Core\\Conditions\\\\Config.xml line 586</p>\r\n<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; self.Plus:ClearAllPoints()</p>\r\n<p>line 588</p>\r\n<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; self.Plus2:ClearAllPoints()</p>\r\n<p>&nbsp;</p> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/transitbus\">transitbus</a> | Imported from CurseForge issue <a href=\"https://wow.curseforge.com/projects/tellmewhen/issues/1410\">#1410</a> | <a href=\"https://github.com/tmw-issue-import/dump/blob/master/html/1410.html\">Raw</a>","closed":true,"closed_at":"2017-05-31T00:51:20Z","created_at":"2017-05-28T20:51:40Z","updated_at":"2017-06-04T19:52:10Z","labels":["invalid"]},"comments":[{"body":" <p>As I get more information or if I can get a taint log and rule out better TMW I will close this if I can prove without doubt that these are contributing to tainting but as this is the only addon I run that calls this, I have to report that it is a high probability this is causing tainting when entering combat.</p>\r\n<p>&nbsp;</p>\r\n<p>It is near impossible to be able to reproduce this at the frequency where I can easily get a taint log showing this but If I find a way, I will.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"05 28 2017 16:00:19 (CST) (UTC-5:00)\" data-epoch=\"1496005219\">May 28, 2017</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/transitbus\">transitbus</a>","created_at":"2017-05-28T20:59:58Z"},{"body":" <p>That's not how that works. That's now how any of this works.</p>\r\n<p>&nbsp;</p>\r\n<p>I appreciate the investigative spirit, but you're way, way off track. ClearAllPoints has nothing to do with maps or anything like that. All it does is reset the anchors of a frame. TellMeWhen is not calling it on any protected frames in any protected context.</p>\r\n<p>&nbsp;</p>\r\n<p>The errors you're getting are the result of nothing more than the fact that Blizzard's taint catcher is hopelessly broken when it comes to giving useful errors. Ghostcrawler promised a fix back during Cata, but obviously that didn't result in anything.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"05 30 2017 19:52:19 (CST) (UTC-5:00)\" data-epoch=\"1496191939\">May 30, 2017</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2017-05-31T00:51:20Z"},{"body":" <p>That's ok. Replacing this addon has eliminated these errors I would get on average, an error, every 30 minutes while doing world quests. regardless of how illogical you think my thought process is and the inevitable \"causation does not imply correlation\", I feel confident that this addon was leading to my issue.</p>\r\n<p>&nbsp;</p>\r\n<p>Again, I can't do an exact step by step guide to reproduce this but swapping in an out of combat rapidly like you do while doing world quests would cause something within this addon to to result in errors.</p>\r\n<p>&nbsp;</p>\r\n<p>I excluded the occasional hide() related errors as that is a known taint issue with toggling the worldmap while in combat via code which I have tracked down the cause. However, this is still the only addon that uses ClearAllPoints() so religiously and the only addon that once removed (disabled) eliminates the errors.</p>\r\n<p>&nbsp;</p>\r\n<p>You can&nbsp; blame the taint mechanics for failure to catch something but I can just as well use the logic of ruling out the culprit to narrow down the cause.</p>\r\n<p>&nbsp;</p>\r\n<p>So I will just slowly continue to transition my alts off of this addon and eventually uninstall it even thought I have enjoyed it's use.</p> <div class=\"project-issue-comment-body-modified\"> <hr> <span class=\"e-infoLabel\">Edited</span><span> <abbr class=\"tip standard-date standard-datetime\" title=\"05 31 2017 12:45:19 (CST) (UTC-5:00)\" data-epoch=\"1496252719\">May 31, 2017</abbr></span> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/transitbus\">transitbus</a>","created_at":"2017-05-31T17:45:08Z"},{"body":" <p>k</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2017-06-04T19:52:10Z"}]}