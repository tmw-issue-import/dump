{"issue":{"title":"[CF 962] critical error in configurator: formula for displaying target range causes error ","body":" <p>What steps will reproduce the problem?<br>1. set an icon label to</p><p>[Range(unit=\"target\")]</p><p>this will display the range to target in place of the icon label.</p><p>2. the range appears on the icon but the configuration interface shows the error<br>CRITICAL ERROR: [string \"local _G = _G;...\"]:6 attempt to index field '__functions' (a nil value)<br>when opening the icon in editing mode</p><p>3. after exiting the configuration mode with /tmw the icon behaves normally, displaying the range to target. It's just the configuration interface that freaks out.</p><p>What do you expect to happen? What happens instead?</p><p>the configuration interface bugs out but the icon works ok for me.</p><p>What version of TellMeWhen are you using? (\"The latest\" is not a version)<br>v7.0.2 r3 (g27f6bdf)</p><p>Do you have an error log of what happened?<br>swatter has not recorded a LUA error for this</p><p>Please provide any additional information below (including any export strings if applicable; see above.)</p><p>^1^T^SType^Sconditionicon ^SConditions^T ^N1^T ^SType^SLIBRANGECHECK ^SOperator^S&lt;= ^SUnit^Starget ^SLevel^N40 ^t^Sn^N1 ^t^SUnAlpha^N0.5 ^SSettingsPerView^T ^Sicon^T ^STextLayout^STMW:textlayout:1JilG7V_X0lU ^STexts^T ^N1^Srange ^N2^S ^N3^S[Range(unit=\"target\")] ^t^t^t^SShowWhen^N3 ^SCustomTex^S87324 ^SEnabled^B ^t^N70202^S~`~| ^Sicon^^</p><p>^1 ^T^N1^T ^SOutline^SOUTLINE ^SJustify^SLEFT ^SSkinAs^SHotKey ^SStringName^SBinding/Label ^SAnchors^T ^N1^T ^Sy^N-2 ^Sx^N-2 ^Spoint^STOPLEFT ^SrelativePoint^STOPLEFT ^t^t^SSize^N9 ^t^N2^T ^SOutline^SOUTLINE ^SJustify^SLEFT ^SStringName^Slabel2 ^SSize^N9 ^t^N3^T ^SAnchors^T ^N1^T ^Spoint^SBOTTOM ^SrelativePoint^SBOTTOM ^t^t^SStringName^Slabel3 ^SDefaultText^S[Stacks:Hide(0)] ^SSize^N14 ^t^SName^Ssmaller~`text ^Sn^N3 ^SGUID^STMW:textlayout:1JilG7V_X0lU ^t^N70202^S~`~| ^Stextlayout^STMW:textlayout:1JilG7V_X0lU ^^</p> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Adrian_G2\">Adrian_G2</a> | Imported from CurseForge issue <a href=\"https://wow.curseforge.com/projects/tellmewhen/issues/962\">#962</a> | <a href=\"https://github.com/tmw-issue-import/dump/blob/master/html/962.html\">Raw</a>","closed":true,"closed_at":"2014-07-05T21:55:14Z","created_at":"2014-07-05T16:41:46Z","updated_at":"2014-07-05T21:55:14Z","labels":["defect","resolved"]},"comments":[{"body":"<strong>Attachment Added:</strong><a href=\"https://media.forgecdn.net/attachments/76/106/tellmewhen_error.jpg\" target=\"_blank\"> tellmewhen_error.jpg</a><br> <a class=\"e-avatar128 lightbox\" href=\"https://media.forgecdn.net/attachments/76/106/tellmewhen_error.jpg\" title=\"tellmewhen_error.jpg\"> <img src=\"https://media.forgecdn.net/attachments/thumbnails/76/106/126/126/tellmewhen_error.jpg\"> </a> <div class=\"attachment-desc\"> <h4 class=\"attachment-title\">tellmewhen_error.jpg</h4> <p>&lt;p&gt;formula parsing error&lt;/p&gt;</p> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Adrian_G2\">Adrian_G2</a>","created_at":"2014-07-05T16:41:46Z"},{"body":" <p>P.S. same error appears if i use<br>\r\n[Range(\"target\")]</p>\r\n<p>instead of<br>\r\n[Range(unit=\"target\")]</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Adrian_G2\">Adrian_G2</a>","created_at":"2014-07-05T21:11:47Z"},{"body":" <p>Thanks. Its just an issue with the way that TMW analyzes DogTags for errors - I missed a step that handles the special type of tag that the [Range] tag is - since it is based off of LibRangeCheck-2.0, the code that the tag is based off of has to be provided dynamically (since the library can be re-loaded and possibly upgraded by another addon at any time), and the way DogTag handles that is pretty lame.</p>\r\n<p>Fixed in gdae7128.</p> <div class=\"project-issue-comment-body-modified\"> </div> \n<br>\n\n> Posted by CurseForge user <a href=\"https://wow.curseforge.com/members/Cybeloras\">Cybeloras</a>","created_at":"2014-07-05T21:54:58Z"}]}